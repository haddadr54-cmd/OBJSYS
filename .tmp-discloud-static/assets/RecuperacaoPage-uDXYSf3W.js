import{r as i,j as e,A as C,X as ae,s as se,B as q,u as me,d as ue,a as pe,v as he,G as ee}from"./index-CCr23udO.js";import{MEDIA_MINIMA_APROVACAO as z,formatarNota as u,getSituacaoAcademica as w,isRecuperacao as ge}from"./gradeConfig-C64ZX5y1.js";import{S as le}from"./save-BDGo1Gz5.js";import{F as be}from"./filter-ClytLayh.js";function je({isOpen:N,onClose:b,aluno:p,disciplinas:v,onSaveNota:h,saving:A=!1}){const[m,F]=i.useState({});if(!N)return null;const R=(r,d)=>{const n=Math.min(10,Math.max(0,parseFloat(d)||0));F(x=>({...x,[r]:n}))},_=(r,d)=>{if(d===void 0)return w(r);const n=Math.max(r,d);return w(n)},$=async()=>{try{for(const[r,d]of Object.entries(m))d>0&&await h(r,d);F({}),b()}catch(r){console.error("Erro ao salvar notas de recuperaÃ§Ã£o:",r)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx(C,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"GestÃ£o de RecuperaÃ§Ã£o"}),e.jsxs("p",{className:"text-yellow-100 mt-1",children:["Aluno: ",e.jsx("span",{className:"font-semibold",children:p.nome})]})]})]}),e.jsx("button",{onClick:b,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(ae,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ParabÃ©ns! Aluno Aprovado"}),e.jsx("p",{className:"text-gray-600",children:"Este aluno nÃ£o possui disciplinas em recuperaÃ§Ã£o."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(C,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h3",{className:"font-semibold text-yellow-800",children:"Disciplinas em RecuperaÃ§Ã£o"})]}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["O aluno precisa atingir mÃ©dia ",z.toFixed(1)," ou superior nas disciplinas abaixo. A nota de recuperaÃ§Ã£o substituirÃ¡ a mÃ©dia original apenas se for maior."]})]}),v.map(r=>{const d=m[r.disciplina.id]||r.notaRecuperacao||0,n=_(r.mediaFinal,d||void 0),x=Math.max(r.mediaFinal,d||0);return e.jsxs("div",{className:`border rounded-lg p-6 transition-all ${n.status==="Aprovado"?"border-green-200 bg-green-50":n.status==="RecuperaÃ§Ã£o"?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm",children:e.jsx(q,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:r.disciplina.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["MÃ©dia Original: ",e.jsx("span",{className:`font-medium ${w(r.mediaFinal).textColor}`,children:u(r.mediaFinal)})]})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${n.status==="Aprovado"?"bg-green-100 text-green-800":n.status==="RecuperaÃ§Ã£o"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nota de RecuperaÃ§Ã£o"}),e.jsx("input",{type:"number",min:"0",max:"10",step:"0.1",value:d||"",onChange:j=>R(r.disciplina.id,j.target.value),placeholder:"0.0",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-center font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MÃ©dia Final Projetada"}),e.jsx("div",{className:`w-full border rounded-lg px-3 py-2 text-center font-bold text-lg ${n.bgColor.replace("bg-","bg-").replace("-500","-100")} ${n.textColor}`,children:u(x)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SituaÃ§Ã£o Final"}),e.jsxs("div",{className:`w-full border rounded-lg px-3 py-2 text-center font-medium flex items-center justify-center space-x-2 ${n.bgColor.replace("bg-","bg-").replace("-500","-100")} ${n.textColor}`,children:[e.jsx("span",{children:n.icon}),e.jsx("span",{children:n.status})]})]})]}),d>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"AnÃ¡lise:"}),x>r.mediaFinal?` A nota de recuperaÃ§Ã£o ${u(d)} elevou a mÃ©dia de ${u(r.mediaFinal)} para ${u(x)}.`:` A nota de recuperaÃ§Ã£o ${u(d)} nÃ£o alterou a mÃ©dia original de ${u(r.mediaFinal)}.`]})})]},r.disciplina.id)})]})}),v.length>0&&e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:Object.keys(m).length>0?e.jsxs("span",{children:[Object.keys(m).length," nota(s) alterada(s) â€¢",e.jsx("strong",{className:"ml-1",children:"Lembre-se de salvar as alteraÃ§Ãµes"})]}):"Digite as notas de recuperaÃ§Ã£o e clique em Salvar"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:$,disabled:A||Object.keys(m).length===0,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:A?"Salvando...":"Salvar Notas"})]})]})]})]})})}function we(){console.log("ðŸ” [RecuperacaoPage] Componente renderizado");const{user:N,isSupabaseConnected:b}=me();console.log("ðŸ” [RecuperacaoPage] Auth:",{user:!!N,isSupabaseConnected:b});const[p,v]=i.useState([]),[h,A]=i.useState([]),[m,F]=i.useState([]),[R,_]=i.useState([]),[$,r]=i.useState(!1),[d,n]=i.useState(null),x=N?ue(N,b):null;console.log("ðŸ” [RecuperacaoPage] DataService:",!!x);const[j,re]=i.useState([]),[T,te]=i.useState(""),[D,oe]=i.useState(""),[O,ne]=i.useState(""),[G,ce]=i.useState(null),[ie,I]=i.useState(!1),[S,K]=i.useState(null),[X,H]=i.useState({}),[L,J]=i.useState(!1);i.useEffect(()=>{setTimeout(async()=>{if(console.log("ðŸ” [RecuperacaoPage] useEffect executado"),!N){console.log("ðŸ” [RecuperacaoPage] UsuÃ¡rio nÃ£o disponÃ­vel"),n("UsuÃ¡rio nÃ£o autenticado");return}if(!x){console.log("ðŸ” [RecuperacaoPage] DataService nÃ£o disponÃ­vel"),n("ServiÃ§o de dados nÃ£o disponÃ­vel");return}try{r(!0),n(null),console.log("ðŸ” [RecuperacaoPage] Carregando dados reais...");const l=await x.getAlunos();console.log("ðŸ” [RecuperacaoPage] Alunos:",(l==null?void 0:l.length)||0);const s=await x.getNotas();console.log("ðŸ” [RecuperacaoPage] Notas:",(s==null?void 0:s.length)||0);const o=await x.getDisciplinas();console.log("ðŸ” [RecuperacaoPage] Disciplinas:",(o==null?void 0:o.length)||0);const t=await x.getTurmas();console.log("ðŸ” [RecuperacaoPage] Turmas:",(t==null?void 0:t.length)||0),A(l||[]),v(s||[]),F(o||[]),_(t||[])}catch(l){console.error("âŒ [RecuperacaoPage] Erro ao carregar dados:",l),n(l instanceof Error?l.message:"Erro desconhecido ao carregar dados")}finally{r(!1)}},100)},[]),i.useEffect(()=>{if(!h.length||!p.length||!m.length)return;const a=[];h.forEach(l=>{const s=p.filter(g=>g.aluno_id===l.id),o=[];let t=0,c=0;m.forEach(g=>{var W;const M=s.filter(P=>P.disciplina_id===g.id);if(M.length>0){const P=M.filter(y=>y.tipo!=="recuperacao"),Y=P.length>0?P:M,B=Y.reduce((y,xe)=>y+(xe.nota||0),0)/Y.length,U=(W=M.find(y=>y.tipo==="recuperacao"))==null?void 0:W.nota;let Z="recuperacao";U!==void 0&&(Z=Math.max(B,U)>=z?"aprovado_recuperacao":"reprovado_final"),o.push({disciplina:g,mediaFinal:B,notaRecuperacao:U,situacao:Z}),t+=B,c++}});const E=c>0?t/c:0,f=o.filter(g=>ge(g.mediaFinal)||g.situacao==="recuperacao"||g.situacao==="reprovado_final");f.length>0&&a.push({aluno:l,disciplinas:f,mediaGeral:E})}),re(a)},[h,p,m]);const Q=j.filter(a=>{const l=a.aluno.nome.toLowerCase().includes(O.toLowerCase()),s=!T||a.aluno.turma_id===T,o=!D||a.disciplinas.some(t=>t.disciplina.id===D);return l&&s&&o}),de=async(a,l)=>{if(S)return V(S.aluno.id,a,l)},V=async(a,l,s)=>{if(x)try{J(!0);const o=p.find(c=>c.aluno_id===a&&c.disciplina_id===l&&c.tipo==="recuperacao");let t=null;o?t=await x.updateNota(o.id,{nota:s}):t=await x.createNota({aluno_id:a,disciplina_id:l,nota:s,tipo:"recuperacao",trimestre:0,comentario:"Nota de recuperaÃ§Ã£o"}),H(c=>({...c,[a]:{...c[a],[l]:s}})),t&&v(c=>{const E=c.findIndex(f=>f.id===t.id);if(E!==-1){const f=[...c];return f[E]=t,f}return[...c,t]})}catch(o){console.error("âŒ [RecuperacaoPage] Erro ao salvar nota de recuperaÃ§Ã£o:",o),alert("Erro ao salvar nota de recuperaÃ§Ã£o. Tente novamente.")}finally{J(!1)}},k={totalAlunosRecuperacao:j.length,disciplinasComRecuperacao:[...new Set(j.flatMap(a=>a.disciplinas.map(l=>l.disciplina.id)))].length,aprovadosRecuperacao:j.filter(a=>a.disciplinas.every(l=>l.situacao==="aprovado_recuperacao")).length,reprovadosFinal:j.filter(a=>a.disciplinas.some(l=>l.situacao==="reprovado_final")).length};return $?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dados de recuperaÃ§Ã£o..."})]})}):d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(C,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Tentar Novamente"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(C,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"GestÃ£o de RecuperaÃ§Ã£o"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Alunos com mÃ©dia abaixo de ",z.toFixed(1)," - Sistema de RecuperaÃ§Ã£o"]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Recarregar"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(pe,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alunos em RecuperaÃ§Ã£o"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.totalAlunosRecuperacao})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(q,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disciplinas Afetadas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.disciplinasComRecuperacao})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(se,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aprovados na RecuperaÃ§Ã£o"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.aprovadosRecuperacao})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Reprovados Final"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.reprovadosFinal})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(he,{className:"h-4 w-4 inline mr-1"}),"Buscar Aluno"]}),e.jsx("input",{type:"text",value:O,onChange:a=>ne(a.target.value),placeholder:"Digite o nome do aluno...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(be,{className:"h-4 w-4 inline mr-1"}),"Filtrar por Turma"]}),e.jsxs("select",{value:T,onChange:a=>te(a.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todas as turmas"}),R.map(a=>e.jsx("option",{value:a.id,children:a.nome},a.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(q,{className:"h-4 w-4 inline mr-1"}),"Filtrar por Disciplina"]}),e.jsxs("select",{value:D,onChange:a=>oe(a.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todas as disciplinas"}),m.map(a=>e.jsx("option",{value:a.id,children:a.nome},a.id))]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Alunos Identificados para RecuperaÃ§Ã£o"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:Q.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ee,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum aluno em recuperaÃ§Ã£o encontrado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:O||T||D?"Tente ajustar os filtros para ver mais resultados.":h.length===0?"Nenhum dado de aluno foi carregado. Verifique a conexÃ£o com o banco de dados.":p.length===0?"Nenhuma nota foi encontrada. Cadastre algumas notas primeiro.":"Todos os alunos estÃ£o com mÃ©dias satisfatÃ³rias!"}),(h.length===0||p.length===0||m.length===0)&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Status dos Dados:"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsxs("li",{children:["â€¢ Alunos: ",h.length]}),e.jsxs("li",{children:["â€¢ Notas: ",p.length]}),e.jsxs("li",{children:["â€¢ Disciplinas: ",m.length]}),e.jsxs("li",{children:["â€¢ Turmas: ",R.length]}),e.jsxs("li",{children:["â€¢ Supabase: ",b?"Conectado":"Desconectado"]})]})]})]}):Q.map(a=>{var l;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(ee,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.aluno.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Turma: ",(l=R.find(s=>s.id===a.aluno.turma_id))==null?void 0:l.nome," â€¢ MÃ©dia Geral: ",e.jsx("span",{className:`font-medium ${w(a.mediaGeral).textColor}`,children:u(a.mediaGeral)})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{K(a),I(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors",children:"Gerenciar RecuperaÃ§Ã£o"}),e.jsx("button",{onClick:()=>ce(G===a.aluno.id?null:a.aluno.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:G===a.aluno.id?"Ocultar Detalhes":"Ver Detalhes"})]})]}),G===a.aluno.id&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Disciplinas em RecuperaÃ§Ã£o:"}),e.jsx("div",{className:"space-y-3",children:a.disciplinas.map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:s.disciplina.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["MÃ©dia Final: ",e.jsx("span",{className:`font-medium ${w(s.mediaFinal).textColor}`,children:u(s.mediaFinal)}),s.notaRecuperacao!==void 0&&e.jsxs("span",{className:"ml-2",children:["â€¢ RecuperaÃ§Ã£o: ",e.jsx("span",{className:`font-medium ${w(s.notaRecuperacao).textColor}`,children:u(s.notaRecuperacao)})]})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.situacao==="aprovado_recuperacao"?"bg-green-100 text-green-800":s.situacao==="reprovado_final"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.situacao==="aprovado_recuperacao"?"Aprovado":s.situacao==="reprovado_final"?"Reprovado":"Pendente"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nota de RecuperaÃ§Ã£o:"}),e.jsx("input",{type:"number",min:"0",max:"10",step:"0.1",defaultValue:s.notaRecuperacao||"",placeholder:"0.0",className:"w-24 border border-gray-300 rounded px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500",onChange:o=>{const t=parseFloat(o.target.value)||0;H(c=>({...c,[a.aluno.id]:{...c[a.aluno.id],[s.disciplina.id]:t}}))},onKeyPress:o=>{var t;if(o.key==="Enter"){const c=((t=X[a.aluno.id])==null?void 0:t[s.disciplina.id])||s.notaRecuperacao||0;V(a.aluno.id,s.disciplina.id,c)}}}),e.jsxs("button",{onClick:()=>{var t;const o=((t=X[a.aluno.id])==null?void 0:t[s.disciplina.id])||s.notaRecuperacao||0;if(o<0||o>10){alert("A nota deve estar entre 0 e 10");return}V(a.aluno.id,s.disciplina.id,o)},disabled:L,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-1 transition-colors",children:[e.jsx(le,{className:"h-3 w-3"}),e.jsx("span",{children:L?"Salvando...":"Salvar"})]})]})]},s.disciplina.id))})]})]},a.aluno.id)})})]})]}),S&&e.jsx(je,{isOpen:ie,onClose:()=>{I(!1),K(null)},aluno:S.aluno,disciplinas:S.disciplinas,onSaveNota:de,saving:L})]})}export{we as RecuperacaoPage,we as default};
