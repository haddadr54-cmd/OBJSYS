import{u as U,d as z,r as g,j as e,i as N,G as C,a as S,B as y,T as P,C as V,F as Y}from"./index-CCr23udO.js";import{getSituacaoAcademica as k,isAprovado as H}from"./gradeConfig-C64ZX5y1.js";import{D as w}from"./download-B2qXGiUz.js";import{F as W}from"./filter-ClytLayh.js";function X(){const{user:x,isSupabaseConnected:R}=U(),b=z(x,R),[n,p]=g.useState({tipo:"aluno",periodo:"mes",turma:"",disciplina:""}),[o,G]=g.useState({alunos:[],turmas:[],notas:[],usuarios:[],disciplinas:[]}),[c,T]=g.useState(null),[A,D]=g.useState(!1),[j,_]=g.useState(!0);g.useEffect(()=>{q()},[R]),g.useEffect(()=>{!j&&x&&x.tipo_usuario==="professor"&&!c&&p(s=>({...s,tipo:"turma"}))},[j,x,c]),g.useEffect(()=>{!j&&x&&x.tipo_usuario==="professor"&&!c&&n.tipo==="turma"&&h()},[n.tipo,j,x,c]);const q=async()=>{try{const[s,r,a,t,i]=await Promise.all([b.getAlunos(),b.getTurmas(),b.getNotas(),b.getPermissions().canViewAllUsers?b.getUsuarios():[],b.getDisciplinas()]);G({alunos:s,turmas:r,notas:a,usuarios:t,disciplinas:i})}catch(s){console.error("Erro ao carregar dados:",s)}finally{_(!1)}},h=async()=>{D(!0);try{let s={};switch(n.tipo){case"aluno":s=E();break;case"turma":s=$();break;case"professor":s=M();break;case"disciplina":s=O();break;case"desempenho":s=F();break;case"frequencia":s=L();break;default:s=F()}T(s)}catch(s){console.error("Erro ao gerar relatório:",s),alert("Erro ao gerar relatório")}finally{D(!1)}},E=()=>{let s=o.alunos;n.turma&&(s=s.filter(a=>a.turma_id===n.turma));const r=s.map(a=>{const t=o.notas.filter(l=>l.aluno_id===a.id),i=o.turmas.find(l=>l.id===a.turma_id),d=o.usuarios.find(l=>l.id===a.responsavel_id),m=t.length>0?t.reduce((l,u)=>l+(u.nota||0),0)/t.length:0;return{nome:a.nome,turma:(i==null?void 0:i.nome)||"Sem turma",responsavel:(d==null?void 0:d.nome)||"Sem responsável",totalNotas:t.length,mediaGeral:m.toFixed(1),situacao:k(m).status,ultimaNota:t.length>0?new Date(t[t.length-1].criado_em).toLocaleDateString("pt-BR"):"Nenhuma nota"}});return{titulo:"Relatório por Aluno",tipo:"aluno",dados:r,colunas:["Nome","Turma","Responsável","Total Notas","Média Geral","Situação","Última Nota"],resumo:{totalAlunos:r.length,mediaGeral:r.length>0?(r.reduce((a,t)=>a+parseFloat(t.mediaGeral),0)/r.length).toFixed(1):"0.0",aprovados:r.filter(a=>a.situacao==="Aprovado").length,recuperacao:r.filter(a=>a.situacao==="Recuperação").length,reprovados:r.filter(a=>a.situacao==="Reprovado").length}}},$=()=>{let s=o.turmas;n.turma&&(s=s.filter(a=>a.id===n.turma));const r=s.map(a=>{const t=o.alunos.filter(l=>l.turma_id===a.id),i=o.notas.filter(l=>t.some(u=>u.id===l.aluno_id)),d=i.length>0?i.reduce((l,u)=>l+(u.nota||0),0)/i.length:0,m=o.disciplinas.filter(l=>l.turma_id===a.id);return{nome:a.nome,anoLetivo:a.ano_letivo,totalAlunos:t.length,totalDisciplinas:m.length,mediaTurma:d.toFixed(1),totalNotas:i.length,status:a.ativa?"Ativa":"Inativa"}});return{titulo:"Relatório por Turma",tipo:"turma",dados:r,colunas:["Nome","Ano Letivo","Total Alunos","Disciplinas","Média da Turma","Total Notas","Status"],resumo:{totalTurmas:r.length,totalAlunos:r.reduce((a,t)=>a+t.totalAlunos,0),mediaGeral:r.length>0?(r.reduce((a,t)=>a+parseFloat(t.mediaTurma),0)/r.length).toFixed(1):"0.0"}}},M=()=>{const r=o.usuarios.filter(a=>a.tipo_usuario==="professor").map(a=>{const t=o.disciplinas.filter(u=>u.professor_id===a.id),i=[...new Set(t.map(u=>u.turma_id))],d=o.alunos.filter(u=>i.includes(u.turma_id)),m=o.notas.filter(u=>t.some(v=>v.id===u.disciplina_id)),l=m.length>0?m.reduce((u,v)=>u+(v.nota||0),0)/m.length:0;return{nome:a.nome,email:a.email,totalTurmas:i.length,totalAlunos:d.length,totalDisciplinas:t.length,totalNotas:m.length,mediaGeral:l.toFixed(1),status:a.ativo?"Ativo":"Inativo"}});return{titulo:"Relatório por Professor",tipo:"professor",dados:r,colunas:["Nome","Email","Turmas","Alunos","Disciplinas","Notas Lançadas","Média Geral","Status"],resumo:{totalProfessores:r.length,mediaGeral:r.length>0?(r.reduce((a,t)=>a+parseFloat(t.mediaGeral),0)/r.length).toFixed(1):"0.0"}}},O=()=>{let s=o.disciplinas;n.disciplina&&(s=s.filter(a=>a.id===n.disciplina));const r=s.map(a=>{const t=o.notas.filter(l=>l.disciplina_id===a.id),i=o.turmas.find(l=>l.id===a.turma_id),d=o.usuarios.find(l=>l.id===a.professor_id),m=t.length>0?t.reduce((l,u)=>l+(u.nota||0),0)/t.length:0;return{nome:a.nome,codigo:a.codigo||"N/A",turma:(i==null?void 0:i.nome)||"Sem turma",professor:(d==null?void 0:d.nome)||"Sem professor",totalNotas:t.length,mediaDisciplina:m.toFixed(1),status:a.ativa?"Ativa":"Inativa"}});return{titulo:"Relatório por Disciplina",tipo:"disciplina",dados:r,colunas:["Nome","Código","Turma","Professor","Total Notas","Média","Status"],resumo:{totalDisciplinas:r.length,mediaGeral:r.length>0?(r.reduce((a,t)=>a+parseFloat(t.mediaDisciplina),0)/r.length).toFixed(1):"0.0"}}},F=()=>{const s=o.notas.length>0?o.notas.reduce((i,d)=>i+(d.nota||0),0)/o.notas.length:0,r=o.alunos.filter(i=>{const d=o.notas.filter(l=>l.aluno_id===i.id),m=d.length>0?d.reduce((l,u)=>l+(u.nota||0),0)/d.length:0;return H(m)}).length,a=o.alunos.filter(i=>{const d=o.notas.filter(l=>l.aluno_id===i.id),m=d.length>0?d.reduce((l,u)=>l+(u.nota||0),0)/d.length:0;return k(m).status==="Recuperação"}).length,t=o.alunos.length-r-a;return{titulo:"Relatório de Desempenho Geral",tipo:"desempenho",dados:[{indicador:"Média Geral da Escola",valor:s.toFixed(1)},{indicador:"Total de Alunos",valor:o.alunos.length.toString()},{indicador:"Alunos Aprovados",valor:`${r} (${(r/Math.max(o.alunos.length,1)*100).toFixed(1)}%)`},{indicador:"Alunos em Recuperação",valor:`${a} (${(a/Math.max(o.alunos.length,1)*100).toFixed(1)}%)`},{indicador:"Alunos Reprovados",valor:`${t} (${(t/Math.max(o.alunos.length,1)*100).toFixed(1)}%)`},{indicador:"Total de Turmas",valor:o.turmas.length.toString()},{indicador:"Total de Disciplinas",valor:o.disciplinas.length.toString()},{indicador:"Total de Professores",valor:o.usuarios.filter(i=>i.tipo_usuario==="professor").length.toString()}],colunas:["Indicador","Valor"],resumo:{mediaGeral:s.toFixed(1),taxaAprovacao:(r/Math.max(o.alunos.length,1)*100).toFixed(1)+"%",totalAlunos:o.alunos.length}}},L=()=>{const s=o.alunos.map(r=>{const a=o.turmas.find(i=>i.id===r.turma_id),t=Math.floor(Math.random()*20)+80;return{nome:r.nome,turma:(a==null?void 0:a.nome)||"Sem turma",frequencia:t+"%",totalAulas:40,presencas:Math.floor(t/100*40),faltas:40-Math.floor(t/100*40),situacao:t>=75?"Regular":"Irregular"}});return{titulo:"Relatório de Frequência",tipo:"frequencia",dados:s,colunas:["Nome","Turma","Frequência","Total Aulas","Presenças","Faltas","Situação"],resumo:{frequenciaMedia:s.length>0?(s.reduce((r,a)=>r+parseFloat(a.frequencia),0)/s.length).toFixed(1)+"%":"0%",alunosRegulares:s.filter(r=>r.situacao==="Regular").length,alunosIrregulares:s.filter(r=>r.situacao==="Irregular").length}}},f=s=>{if(!c){alert("Gere um relatório primeiro antes de exportar");return}s==="pdf"?I():s==="excel"&&B()},I=()=>{const s=window.open("","_blank");if(!s)return;const r=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${c.titulo}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
            h2 { color: #374151; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .resumo { background-color: #eff6ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .footer { margin-top: 30px; text-align: center; color: #6b7280; font-size: 12px; }
          </style>
        </head>
        <body>
          <h1>${c.titulo}</h1>
          <p><strong>Gerado em:</strong> ${new Date().toLocaleString("pt-BR")}</p>
          <p><strong>Gerado por:</strong> ${x==null?void 0:x.nome}</p>
          
          <div class="resumo">
            <h2>Resumo</h2>
            ${Object.entries(c.resumo).map(([a,t])=>`<p><strong>${a}:</strong> ${t}</p>`).join("")}
          </div>
          
          <h2>Dados Detalhados</h2>
          <table>
            <thead>
              <tr>
                ${c.colunas.map(a=>`<th>${a}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${c.dados.map(a=>`<tr>${Object.values(a).map(t=>`<td>${String(t)}</td>`).join("")}</tr>`).join("")}
            </tbody>
          </table>
          
          <div class="footer">
            <p>Relatório gerado pelo Sistema Escolar Objetivo</p>
            <p>© ${new Date().getFullYear()} - Todos os direitos reservados</p>
          </div>
        </body>
      </html>
    `;s.document.write(r),s.document.close(),s.print()},B=()=>{const s=[c.colunas.join(","),...c.dados.map(i=>Object.values(i).map(d=>`"${d}"`).join(","))].join(`
`),r=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),t=URL.createObjectURL(r);a.setAttribute("href",t),a.setAttribute("download",`${c.titulo.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Relatórios"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f("pdf"),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"PDF"})]}),e.jsxs("button",{onClick:()=>f("excel"),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Excel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(W,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Configurações do Relatório"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Relatório"}),e.jsxs("select",{value:n.tipo,onChange:s=>p({...n,tipo:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"aluno",children:"Por Aluno"}),e.jsx("option",{value:"turma",children:"Por Turma"}),e.jsx("option",{value:"professor",children:"Por Professor"}),e.jsx("option",{value:"disciplina",children:"Por Disciplina"}),e.jsx("option",{value:"desempenho",children:"Desempenho Geral"}),e.jsx("option",{value:"frequencia",children:"Frequência"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Período"}),e.jsxs("select",{value:n.periodo,onChange:s=>p({...n,periodo:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"semana",children:"Esta Semana"}),e.jsx("option",{value:"mes",children:"Este Mês"}),e.jsx("option",{value:"trimestre",children:"Este Trimestre"}),e.jsx("option",{value:"semestre",children:"Este Semestre"}),e.jsx("option",{value:"ano",children:"Este Ano"}),e.jsx("option",{value:"personalizado",children:"Período Personalizado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Turma (Opcional)"}),e.jsxs("select",{value:n.turma,onChange:s=>p({...n,turma:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as turmas"}),o.turmas.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disciplina (Opcional)"}),e.jsxs("select",{value:n.disciplina,onChange:s=>p({...n,disciplina:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as disciplinas"}),o.disciplinas.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{children:e.jsxs("button",{onClick:h,disabled:A,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:A?"Gerando...":"Gerar Relatório"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Alunos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.alunos.length})]}),e.jsx(C,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Turmas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.turmas.length})]}),e.jsx(S,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Notas Lançadas"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.notas.length})]}),e.jsx(y,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Média Geral"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:o.notas.length>0?(o.notas.reduce((s,r)=>s+(r.nota||r.valor||0),0)/o.notas.length).toFixed(1):"0.0"})]}),e.jsx(P,{className:"h-8 w-8 text-yellow-600"})]})})]}),!c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer group",children:e.jsxs("div",{onClick:()=>{p({...n,tipo:"aluno"}),h()},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:e.jsx(C,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:"Relatório por Aluno"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Desempenho individual, notas, frequência e evolução de cada aluno."}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Histórico de notas"}),e.jsx("li",{children:"• Frequência às aulas"}),e.jsx("li",{children:"• Evolução por disciplina"}),e.jsx("li",{children:"• Comparativo com a turma"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"👆 Clique para gerar relatório"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer group",children:e.jsxs("div",{onClick:()=>{p({...n,tipo:"turma"}),h()},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-full",children:e.jsx(S,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:"Relatório por Turma"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Análise geral da turma, médias, distribuição de notas e estatísticas."}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Média geral da turma"}),e.jsx("li",{children:"• Distribuição de notas"}),e.jsx("li",{children:"• Taxa de aprovação"}),e.jsx("li",{children:"• Ranking de alunos"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"👆 Clique para gerar relatório"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer group",children:e.jsxs("div",{onClick:()=>{p({...n,tipo:"professor"}),h()},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-full",children:e.jsx(y,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:"Relatório por Professor"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Desempenho das turmas por professor, estatísticas de ensino."}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Turmas atribuídas"}),e.jsx("li",{children:"• Média das turmas"}),e.jsx("li",{children:"• Notas lançadas"}),e.jsx("li",{children:"• Atividades criadas"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"👆 Clique para gerar relatório"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer group",children:e.jsxs("div",{onClick:()=>{p({...n,tipo:"disciplina"}),h()},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 rounded-full",children:e.jsx(y,{className:"h-6 w-6 text-yellow-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:"Relatório por Disciplina"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Análise do desempenho dos alunos em cada disciplina específica."}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Média por disciplina"}),e.jsx("li",{children:"• Dificuldades identificadas"}),e.jsx("li",{children:"• Comparativo entre turmas"}),e.jsx("li",{children:"• Evolução temporal"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"👆 Clique para gerar relatório"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer group",children:e.jsxs("div",{onClick:()=>{p({...n,tipo:"desempenho"}),h()},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-red-50 rounded-full",children:e.jsx(P,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:"Desempenho Geral"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Visão geral do desempenho da escola, tendências e indicadores."}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Indicadores gerais"}),e.jsx("li",{children:"• Tendências de desempenho"}),e.jsx("li",{children:"• Comparativos históricos"}),e.jsx("li",{children:"• Metas e objetivos"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"👆 Clique para gerar relatório"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer group",children:e.jsxs("div",{onClick:()=>{p({...n,tipo:"frequencia"}),h()},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-full",children:e.jsx(V,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:"Relatório de Frequência"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Análise de presença e faltas dos alunos por período e disciplina."}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Taxa de presença"}),e.jsx("li",{children:"• Faltas por disciplina"}),e.jsx("li",{children:"• Alunos com baixa frequência"}),e.jsx("li",{children:"• Tendências de ausência"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"👆 Clique para gerar relatório"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c?c.titulo:"Preview do Relatório"}),c&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f("pdf"),className:"flex items-center space-x-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"PDF"})]}),e.jsxs("button",{onClick:()=>f("excel"),className:"flex items-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Excel"})]}),e.jsx("button",{onClick:()=>T(null),className:"px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Novo Relatório"})]})]})}),e.jsx("div",{className:"p-6",children:c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Resumo"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(c.resumo).map(([s,r])=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-blue-600 capitalize",children:s.replace(/([A-Z])/g," $1").toLowerCase()}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:String(r)})]},s))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-50",children:c.colunas.map(s=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:s},s))})}),e.jsx("tbody",{children:c.dados.map((s,r)=>e.jsx("tr",{className:r%2===0?"bg-white":"bg-gray-50",children:Object.values(s).map((a,t)=>e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border border-gray-200",children:a},t))},r))})]})}),e.jsxs("div",{className:"text-center text-sm text-gray-500 border-t border-gray-200 pt-4",children:[e.jsxs("p",{children:["Relatório gerado em ",new Date().toLocaleString("pt-BR")," por ",x==null?void 0:x.nome]}),e.jsxs("p",{children:["Total de registros: ",c.dados.length]})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:'Selecione os filtros e clique em "Gerar Relatório"'}),e.jsx("p",{className:"text-sm",children:"O preview do relatório aparecerá aqui"})]})})]})]})}export{X as RelatoriosPage};
