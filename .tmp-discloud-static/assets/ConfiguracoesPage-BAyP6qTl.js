import{am as T,h as L,r as n,j as e,l as u,I as Y,k as v,n as R,m as q,G as I,p as P,K as B,D as z,Z as G,c as O}from"./index-CCr23udO.js";import{R as $}from"./rotate-ccw-DZULjgOf.js";import{S as H}from"./save-BDGo1Gz5.js";import{U as W}from"./upload-DIwgGHqY.js";function V({onNavigate:m,initialTab:C}={}){const{updateLogoConfig:g}=T(),{configs:i,saveConfig:h}=L(),[c,w]=n.useState(C==="aparencia"?"aparencia":"geral"),t={schoolName:"Colégio Objetivo",schoolAddress:"Rua das Flores, 123 - Centro",schoolPhone:"(11) 1234-5678",schoolEmail:"contato@objetivo.edu.br",schoolWebsite:"https://objetivo.edu.br",primaryColor:"#002776",secondaryColor:"#3B82F6",accentColor:"#8B5CF6",logoUrl:"/logo-objetivo.png",backgroundImageUrl:"",enableNotifications:!0,enableEmailNotifications:!0,enableSmsNotifications:!1,autoBackup:!0,backupFrequency:"daily",passwordMinLength:6,sessionTimeout:60,enableTwoFactor:!1,academicYear:"2024",gradeScale:"decimal",attendanceRequired:75,theme:"light",language:"pt-BR",dateFormat:"DD/MM/YYYY",timeFormat:"24h"},[a,r]=n.useState(t),[p,b]=n.useState(!1),[k,f]=n.useState(!1),[l,d]=n.useState({});n.useEffect(()=>{S()},[]),n.useEffect(()=>{const s=i==null?void 0:i.visual_customization;s&&r(o=>({...o,primaryColor:s.primaryColor??o.primaryColor,secondaryColor:s.secondaryColor??o.secondaryColor,accentColor:s.accentColor??o.accentColor,logoUrl:s.logoUrl??o.logoUrl}))},[i==null?void 0:i.visual_customization]);const S=()=>{const s=localStorage.getItem("systemConfig");if(s)try{const o=JSON.parse(s);r({...t,...o})}catch(o){console.error("Erro ao carregar configurações:",o)}else r(t)},M=async()=>{b(!0),d({});try{const s={};if(a.schoolName.trim()||(s.schoolName="Nome da escola é obrigatório"),(a.passwordMinLength<4||a.passwordMinLength>20)&&(s.passwordMinLength="Tamanho mínimo deve estar entre 4 e 20 caracteres"),(a.sessionTimeout<15||a.sessionTimeout>480)&&(s.sessionTimeout="Timeout deve estar entre 15 e 480 minutos"),(a.attendanceRequired<50||a.attendanceRequired>100)&&(s.attendanceRequired="Frequência deve estar entre 50% e 100%"),Object.keys(s).length>0){d(s);return}localStorage.setItem("systemConfig",JSON.stringify(a)),await h("visual_customization",{logoUrl:a.logoUrl,systemName:a.schoolName,primaryColor:a.primaryColor,secondaryColor:a.secondaryColor,accentColor:a.accentColor}),g({logoUrl:a.logoUrl,systemName:a.schoolName}),f(!0),setTimeout(()=>f(!1),3e3)}catch(s){console.error("Erro ao salvar configurações:",s),d({submit:"Erro ao salvar configurações"})}finally{b(!1)}},A=()=>{confirm("Tem certeza que deseja restaurar as configurações padrão? Esta ação não pode ser desfeita.")&&(localStorage.removeItem("systemConfig"),r(t),g({logoUrl:t.logoUrl,systemName:t.schoolName}),h("visual_customization",{logoUrl:t.logoUrl,systemName:t.schoolName,primaryColor:t.primaryColor,secondaryColor:t.secondaryColor,accentColor:t.accentColor}))},E=(s,o)=>{var j;const x=(j=o.target.files)==null?void 0:j[0];if(x){if(x.size>5*1024*1024){d({...l,[s]:"Imagem deve ter no máximo 5MB"});return}const y=new FileReader;y.onload=D=>{var N;const F=(N=D.target)==null?void 0:N.result;r({...a,[s]:F}),d({...l,[s]:""})},y.readAsDataURL(x)}},U=[{id:"geral",label:"Geral",icon:v},{id:"aparencia",label:"Aparência",icon:R},{id:"sistema",label:"Sistema",icon:q},{id:"seguranca",label:"Segurança",icon:u},{id:"academico",label:"Acadêmico",icon:I},{id:"interface",label:"Interface",icon:P}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configurações do Sistema"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:A,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:"Restaurar Padrão"})]}),e.jsxs("button",{onClick:()=>m==null?void 0:m("permissoes"),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:"Gerenciar Permissões"})]}),e.jsxs("button",{onClick:M,disabled:p,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:p?"Salvando...":"Salvar"})]})]})]}),k&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Configurações salvas com sucesso!"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:U.map(s=>{const o=s.icon;return e.jsx("button",{onClick:()=>w(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${c===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]})},s.id)})})}),e.jsxs("div",{className:"p-6",children:[c==="geral"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informações da Escola"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Escola *"}),e.jsx("input",{type:"text",value:a.schoolName,onChange:s=>r({...a,schoolName:s.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.schoolName?"border-red-300":"border-gray-300"}`,placeholder:"Nome da instituição"}),l.schoolName&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.schoolName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano Letivo"}),e.jsx("input",{type:"text",value:a.academicYear,onChange:s=>r({...a,academicYear:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereço"}),e.jsx("input",{type:"text",value:a.schoolAddress,onChange:s=>r({...a,schoolAddress:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Endereço completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:a.schoolPhone,onChange:s=>r({...a,schoolPhone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 1234-5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",value:a.schoolEmail,onChange:s=>r({...a,schoolEmail:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contato@escola.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:a.schoolWebsite,onChange:s=>r({...a,schoolWebsite:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://escola.com"})]})]})]}),c==="aparencia"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personalização Visual"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo da Escola"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden",children:a.logoUrl?e.jsx("img",{src:a.logoUrl,alt:"Logo",className:"w-full h-full object-cover"}):e.jsx(v,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>E("logoUrl",s),className:"hidden",id:"logo-upload"}),e.jsxs("label",{htmlFor:"logo-upload",className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Escolher Logo"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG/JPG até 5MB"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cores do Sistema"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:a.primaryColor,onChange:s=>r({...a,primaryColor:s.target.value}),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cor Primária"}),e.jsx("p",{className:"text-xs text-gray-500",children:a.primaryColor})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:a.secondaryColor,onChange:s=>r({...a,secondaryColor:s.target.value}),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cor Secundária"}),e.jsx("p",{className:"text-xs text-gray-500",children:a.secondaryColor})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:a.accentColor,onChange:s=>r({...a,accentColor:s.target.value}),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cor de Destaque"}),e.jsx("p",{className:"text-xs text-gray-500",children:a.accentColor})]})]})]})]})]})]}),c==="sistema"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações do Sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notificações"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.enableNotifications,onChange:s=>r({...a,enableNotifications:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Habilitar notificações"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.enableEmailNotifications,onChange:s=>r({...a,enableEmailNotifications:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Notificações por e-mail"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.enableSmsNotifications,onChange:s=>r({...a,enableSmsNotifications:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Notificações por SMS"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Automático"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.autoBackup,onChange:s=>r({...a,autoBackup:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Habilitar backup automático"})]}),a.autoBackup&&e.jsxs("select",{value:a.backupFrequency,onChange:s=>r({...a,backupFrequency:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"daily",children:"Diário"}),e.jsx("option",{value:"weekly",children:"Semanal"}),e.jsx("option",{value:"monthly",children:"Mensal"})]})]})]})]})]}),c==="seguranca"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações de Segurança"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tamanho Mínimo da Senha"}),e.jsx("input",{type:"number",min:"4",max:"20",value:a.passwordMinLength,onChange:s=>r({...a,passwordMinLength:parseInt(s.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.passwordMinLength?"border-red-300":"border-gray-300"}`}),l.passwordMinLength&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.passwordMinLength})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timeout da Sessão (minutos)"}),e.jsx("input",{type:"number",min:"15",max:"480",value:a.sessionTimeout,onChange:s=>r({...a,sessionTimeout:parseInt(s.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.sessionTimeout?"border-red-300":"border-gray-300"}`}),l.sessionTimeout&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.sessionTimeout})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.enableTwoFactor,onChange:s=>r({...a,enableTwoFactor:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Habilitar autenticação de dois fatores"})]})})]})]}),c==="academico"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações Acadêmicas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sistema de Notas"}),e.jsxs("select",{value:a.gradeScale,onChange:s=>r({...a,gradeScale:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"decimal",children:"Decimal (0-10)"}),e.jsx("option",{value:"letter",children:"Letras (A-F)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequência Mínima Obrigatória (%)"}),e.jsx("input",{type:"number",min:"50",max:"100",value:a.attendanceRequired,onChange:s=>r({...a,attendanceRequired:parseInt(s.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.attendanceRequired?"border-red-300":"border-gray-300"}`}),l.attendanceRequired&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.attendanceRequired})]})]})]}),c==="interface"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações de Interface"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tema"}),e.jsxs("select",{value:a.theme,onChange:s=>r({...a,theme:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"light",children:"Claro"}),e.jsx("option",{value:"dark",children:"Escuro"}),e.jsx("option",{value:"auto",children:"Automático"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idioma"}),e.jsxs("select",{value:a.language,onChange:s=>r({...a,language:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"pt-BR",children:"Português (Brasil)"}),e.jsx("option",{value:"en-US",children:"English (US)"}),e.jsx("option",{value:"es-ES",children:"Español"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato de Data"}),e.jsxs("select",{value:a.dateFormat,onChange:s=>r({...a,dateFormat:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/AAAA"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/AAAA"}),e.jsx("option",{value:"YYYY-MM-DD",children:"AAAA-MM-DD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato de Hora"}),e.jsxs("select",{value:a.timeFormat,onChange:s=>r({...a,timeFormat:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"24h",children:"24 horas"}),e.jsx("option",{value:"12h",children:"12 horas (AM/PM)"})]})]})]})]}),l.submit&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-red-700 text-sm flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),l.submit]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações do Sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(z,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Banco de Dados"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Supabase"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(u,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Segurança"}),e.jsx("p",{className:"text-xs text-green-600",children:"SSL Ativo"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx(G,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Performance"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Otimizada"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx(O,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Uptime"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"99.9%"})]})]})]})]})}export{V as ConfiguracoesPage};
