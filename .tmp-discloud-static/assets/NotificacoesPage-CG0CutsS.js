const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-window-CAoWHlGH.js","assets/index-CCr23udO.js","assets/index-CKFdKx3N.css"])))=>i.map(i=>d[i]);
import{$ as be,R as l,j as e,r as ie,_ as Ve,h as Je,u as qe,M as He,C as Ke,F as Ge,m as Ze,c as ne,I as ce,E as Qe,w as q,A as de,s as xe,S as ue,v as We}from"./index-CCr23udO.js";import{R as fe}from"./refresh-cw-DeA23GkC.js";import{I as Xe}from"./ItemDetailModal-Dr1W76Xe.js";import{T as me}from"./trash-2-IEheby2Z.js";import{F as Ye}from"./filter-ClytLayh.js";import{A as es}from"./archive-d9il3qmI.js";import{I as he}from"./info-frV-0ZWO.js";import"./gradeConfig-C64ZX5y1.js";const ss=({onForceSync:u})=>{const{meta:r,flags:n,resetMetrics:d,resetAll:x}=be(),h=l.useMemo(()=>r.lastRefresh?new Date(r.lastRefresh).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Nunca",[r.lastRefresh]),y=l.useMemo(()=>{if(!r.lastRefresh)return"";const D=Date.now()-r.lastRefresh,w=Math.floor(D/1e3);if(w<60)return`${w}s atrÃ¡s`;const k=Math.floor(w/60);if(k<60)return`${k}m atrÃ¡s`;const S=Math.floor(k/60);return S<24?`${S}h atrÃ¡s`:`${Math.floor(S/24)}d atrÃ¡s`},[r.lastRefresh]);return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6","aria-labelledby":"notif-metrics-heading",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{id:"notif-metrics-heading",className:"font-semibold text-gray-800 flex items-center space-x-2",children:[e.jsx("span",{role:"img","aria-label":"grÃ¡fico",children:"ðŸ“Š"}),e.jsx("span",{children:"MÃ©tricas & DiagnÃ³stico"}),!n.enabled&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-red-100 text-red-700",children:"Sino Oculto"}),n.enabled&&!n.sync&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-yellow-100 text-yellow-700",children:"Lista Congelada"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-gray-500","aria-label":"PolÃ­tica de retenÃ§Ã£o",children:"RetenÃ§Ã£o: 90 dias / mÃ¡x 500 itens"}),e.jsx("button",{onClick:()=>{confirm("Zerar contadores de mÃ©tricas?")&&d()},className:"text-[11px] px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 text-gray-600","aria-label":"Resetar mÃ©tricas",children:"Reset MÃ©tricas"}),e.jsx("button",{onClick:()=>{confirm("Limpar TODAS as notificaÃ§Ãµes, leituras e mÃ©tricas? Essa aÃ§Ã£o nÃ£o afeta o banco.")&&x()},className:"text-[11px] px-2 py-1 rounded bg-red-100 hover:bg-red-200 text-red-700","aria-label":"Reset geral de notificaÃ§Ãµes",children:"Reset Geral"}),e.jsxs("button",{onClick:u,disabled:!n.enabled||!n.sync,className:`flex items-center gap-1 text-[11px] px-2 py-1 rounded border ${n.enabled&&n.sync?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,"aria-label":n.sync?"ForÃ§ar sincronizaÃ§Ã£o de notificaÃ§Ãµes":"SincronizaÃ§Ã£o desativada",children:[e.jsx(fe,{className:"h-3 w-3"})," Sync"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 border border-blue-200","aria-label":"Ãšltimo refresh",children:[e.jsx("p",{className:"text-xs font-medium text-blue-600",children:"Ãšltimo Refresh"}),e.jsx("p",{className:"font-semibold text-blue-800",children:h}),e.jsx("p",{className:"text-[11px] text-blue-600 mt-1",children:y})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-purple-50 border border-purple-200","aria-label":"Total de refreshes",children:[e.jsx("p",{className:"text-xs font-medium text-purple-600",children:"Total Refreshes"}),e.jsx("p",{className:"font-semibold text-purple-800",children:r.totalRefreshes})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200","aria-label":"Diffs suprimidos",children:[e.jsx("p",{className:"text-xs font-medium text-amber-600",children:"Diffs Suprimidos"}),e.jsx("p",{className:"font-semibold text-amber-800",children:r.suppressedUpdates}),e.jsxs("p",{className:"text-[11px] text-amber-600 mt-1",children:[r.totalRefreshes>0?(r.suppressedUpdates/r.totalRefreshes*100).toFixed(0):0,"%"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 border border-green-200","aria-label":"Atraso adaptativo atual",children:[e.jsx("p",{className:"text-xs font-medium text-green-600",children:"Atraso Adaptativo"}),e.jsx("p",{className:"font-semibold text-green-800",children:r.adaptiveDelay?`${r.adaptiveDelay}ms`:"-"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 border border-gray-200","aria-label":"Status de sincronizaÃ§Ã£o",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Status"}),e.jsx("p",{className:"font-semibold text-gray-800",children:n.enabled?n.sync?"Ativo":"Congelado":"Oculto"})]})]})]})};function ge(u,r=300){const[n,d]=ie.useState(u);return ie.useEffect(()=>{const x=setTimeout(()=>d(u),r);return()=>clearTimeout(x)},[u,r]),n}function ts(u,r){const[n,d]=l.useState(()=>{if(typeof window>"u")return r;try{const x=window.localStorage.getItem(u);return x===null?r:JSON.parse(x)}catch{return r}});return l.useEffect(()=>{try{window.localStorage.setItem(u,JSON.stringify(n))}catch{}},[u,n]),[n,d]}function pe(u,r){const[n,d]=ts(u,r),x=l.useCallback(h=>{d(y=>typeof h=="function"?h(y):h)},[d]);return[n,x]}function xs(){var ee,se,te,ae,re,le,oe;const[u,r]=l.useState(null);l.useEffect(()=>{let s=!0;return Ve(()=>import("./react-window-CAoWHlGH.js"),__vite__mapDeps([0,1,2])).then(o=>{const t=o==null?void 0:o.FixedSizeList;s&&r(typeof t=="function"?t:null)}).catch(()=>{s&&r(null)}),()=>{s=!1}},[]);const n=!!u,{notifications:d,unreadCount:x,markAsRead:h,markAsUnread:y,markAllAsRead:D,deleteById:w,deleteRead:k,bulkDelete:S,refresh:U,meta:je,flags:E}=be(),{configs:H}=Je(),{user:N}=qe(),T=(N==null?void 0:N.tipo_usuario)==="pai"||(N==null?void 0:N.tipo_usuario)==="professor",[a,C]=l.useState({busca:"",tipo:"",status:"",prioridade:"",periodo:"todos"}),[i,K]=l.useState(null),[ye,G]=l.useState(!1),[Ne,g]=l.useState(!1),[f,R]=l.useState([]),[v,ve]=pe("notif_showBulk",!1),_=!T&&v,[$,Z]=l.useState(50),[z,we]=pe("notif_showMetrics",!0),[ke,Se]=l.useState(0),F=l.useRef({runs:0,total:0}),B=l.useRef(null),O=ge(a.busca,300),Ce=`${a.tipo}|${a.status}|${a.prioridade}|${a.periodo}`,Q=ge(Ce,250),p=l.useMemo(()=>{const s=`${Q}|${O}`;if(B.current&&B.current.key===s)return B.current.list;const o=performance.now(),t=d.filter(c=>{const m=!a.busca||c.title.toLowerCase().includes(O.toLowerCase())||c.message.toLowerCase().includes(O.toLowerCase()),L=!a.tipo||c.type===a.tipo,Ue=!a.status||a.status==="lida"&&c.read||a.status==="nao_lida"&&!c.read,ze=!a.prioridade||c.priority===a.prioridade;let I=!0;if(a.periodo!=="todos"){const V=new Date(c.timestamp),J=new Date;if(a.periodo==="hoje")I=V.toDateString()===J.toDateString();else if(a.periodo==="semana"){const A=new Date;A.setDate(J.getDate()-7),I=V>=A}else if(a.periodo==="mes"){const A=new Date;A.setMonth(J.getMonth()-1),I=V>=A}}return m&&L&&Ue&&ze&&I}),j=performance.now()-o;return F.current.runs+=1,F.current.total+=j,Se(F.current.total/F.current.runs),B.current={key:s,list:t},t},[d,a,O,Q]);l.useEffect(()=>{Z(50)},[a,p.length]);const M=l.useMemo(()=>p.slice(0,$),[p,$]),Re=160,W=l.useRef(null),[Me,Le]=l.useState(600);l.useEffect(()=>{const s=()=>{const o=W.current;if(!o)return;const t=o.getBoundingClientRect(),b=window.innerHeight-t.top-40;Le(Math.max(320,b))};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const Ae=()=>{const s={exportedAt:new Date().toISOString(),total:d.length,unread:x,meta:je,notifications:d},o=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(o),b=document.createElement("a");b.href=t,b.download="notificacoes.json",b.click(),URL.revokeObjectURL(t)},De=()=>{const s=["id","tipo","titulo","mensagem","timestamp","lida","prioridade","categoria"],o=d.map(m=>[m.id,m.type,m.title.replace(/"/g,'""'),m.message.replace(/"/g,'""'),m.timestamp,m.read,m.priority,m.category]),t=[s.join(";"),...o.map(m=>m.map(L=>typeof L=="string"?`"${L}"`:L).join(";"))].join(`
`),b=new Blob([t],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(b),c=document.createElement("a");c.href=j,c.download="notificacoes.csv",c.click(),URL.revokeObjectURL(j)},X=async s=>{if(confirm("Tem certeza que deseja excluir esta notificaÃ§Ã£o?")){g(!0);try{await w(s)||alert("NÃ£o foi possÃ­vel excluir a notificaÃ§Ã£o. Verifique suas permissÃµes ou tente novamente.")}finally{g(!1)}}},Ee=async()=>{if(confirm("Tem certeza que deseja excluir todas as notificaÃ§Ãµes lidas?")){g(!0);try{await k()}finally{g(!1)}}},Te=s=>{h(s.id),s.type!=="sistema"&&(K(s),G(!0))},_e=s=>{R(o=>o.includes(s)?o.filter(t=>t!==s):[...o,s])},$e=()=>{R(p.map(s=>s.id))},Fe=()=>{R([])},Be=()=>{f.forEach(s=>h(s)),R([])},Oe=async()=>{if(confirm(`Tem certeza que deseja excluir ${f.length} notificaÃ§Ã£o(Ãµes)?`)){g(!0);try{const s=await S(f);s.failedIds.length>0&&alert(`Algumas notificaÃ§Ãµes nÃ£o puderam ser excluÃ­das: ${s.failedIds.length}`),R([])}finally{g(!1)}}},Pe=s=>{switch(s){case"urgente":return"bg-red-100 text-red-800 border-red-200";case"alta":return"bg-orange-100 text-orange-800 border-orange-200";case"normal":return"bg-blue-100 text-blue-800 border-blue-200";case"baixa":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ie=s=>{switch(s){case"urgente":return e.jsx(de,{className:"h-3 w-3"});case"alta":return e.jsx(ue,{className:"h-3 w-3"});case"normal":return e.jsx(he,{className:"h-3 w-3"});case"baixa":return e.jsx(ne,{className:"h-3 w-3"});default:return e.jsx(he,{className:"h-3 w-3"})}},P=d.length,Y=l.useCallback(({index:s,style:o})=>{const t=M[s];if(!t)return null;const b=t.type==="recado"?He:t.type==="prova_tarefa"?Ke:t.type==="material"?Ge:Ze,j=f.includes(t.id);return e.jsx("div",{style:o,className:"pr-2",children:e.jsx("div",{className:`bg-white rounded-xl shadow-sm border-2 mb-2 transition-all duration-300 cursor-pointer hover:shadow-lg hover:scale-[1.01] ${t.read?"border-gray-200 hover:border-gray-300":"border-blue-300 bg-gradient-to-r from-blue-50 to-purple-50"} ${j?"ring-2 ring-blue-500 border-blue-500":""}`,onClick:()=>!_&&Te(t),children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[_&&e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx("input",{type:"checkbox",checked:j,onChange:c=>{c.stopPropagation(),_e(t.id)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("div",{className:`flex-shrink-0 p-3 rounded-xl ${t.type==="recado"?"bg-purple-100":t.type==="prova_tarefa"?"bg-blue-100":t.type==="material"?"bg-green-100":"bg-gray-100"}`,children:e.jsx(b,{className:`h-6 w-6 ${t.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-base font-bold ${t.read?"text-gray-700":"text-gray-900"}`,children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.message})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${Pe(t.priority)}`,children:e.jsxs("div",{className:"flex items-center space-x-1",children:[Ie(t.priority),e.jsx("span",{className:"font-medium capitalize",children:t.priority})]})}),!t.read&&e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-500",children:new Date(t.timestamp).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("span",{className:`px-2 py-1 text-[10px] sm:text-xs rounded-full ${t.type==="recado"?"bg-purple-100 text-purple-800":t.type==="prova_tarefa"?"bg-blue-100 text-blue-800":t.type==="material"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.category})]}),!_&&e.jsxs("div",{className:"flex items-center space-x-2",children:[t.read?e.jsx("button",{onClick:c=>{c.stopPropagation(),y(t.id)},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded","aria-label":"Marcar como nÃ£o lida",children:e.jsx(Qe,{className:"h-4 w-4"})}):e.jsx("button",{onClick:c=>{c.stopPropagation(),h(t.id)},className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded","aria-label":"Marcar como lida",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),X(t.id)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded","aria-label":"Excluir notificaÃ§Ã£o",children:e.jsx(me,{className:"h-4 w-4"})})]})]})]})]})})})})},[M,f,_,h,y,X]);return Ne?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(q,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"ðŸ”” Central de NotificaÃ§Ãµes"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todas as suas notificaÃ§Ãµes em um sÃ³ lugar"})]})]}),e.jsx("div",{className:"flex space-x-2",children:H.notifications_metrics_enabled!==!1&&!T&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ve(!v),className:`px-4 py-2 rounded-lg transition-colors ${v?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-pressed":v,children:v?"Cancelar SeleÃ§Ã£o":"SeleÃ§Ã£o em Massa"}),e.jsxs("button",{onClick:async()=>{g(!0),await U(),g(!1)},disabled:!E.enabled||!E.sync,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${E.enabled&&E.sync?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600"}`,"aria-label":"ForÃ§ar sincronizaÃ§Ã£o de notificaÃ§Ãµes",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:"ForÃ§ar Sync"})]}),e.jsx("button",{onClick:Ae,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm","aria-label":"Exportar JSON",children:"JSON"}),e.jsx("button",{onClick:De,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm","aria-label":"Exportar CSV",children:"CSV"}),e.jsx("button",{onClick:()=>we(s=>!s),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm","aria-pressed":z,children:z?"Ocultar MÃ©tricas":"Ver MÃ©tricas"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl border-2 border-blue-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-blue-600 uppercase tracking-wide",children:"ðŸ“¬ Total"}),e.jsx("p",{className:"text-3xl font-black text-blue-700",children:P})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl shadow-lg",children:e.jsx(q,{className:"h-8 w-8 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-red-50 rounded-2xl shadow-xl border-2 border-red-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-red-600 uppercase tracking-wide",children:"ðŸ”´ NÃ£o Lidas"}),e.jsx("p",{className:"text-3xl font-black text-red-700",children:x})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400 to-red-600 rounded-2xl shadow-lg",children:e.jsx(de,{className:"h-8 w-8 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-green-50 rounded-2xl shadow-xl border-2 border-green-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-green-600 uppercase tracking-wide",children:"âœ… Lidas"}),e.jsx("p",{className:"text-3xl font-black text-green-700",children:P-x})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl shadow-lg",children:e.jsx(xe,{className:"h-8 w-8 text-white"})})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-white to-orange-50 rounded-2xl shadow-xl border-2 border-orange-200 p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-orange-600 uppercase tracking-wide",children:"âš ï¸ Urgentes"}),e.jsx("p",{className:"text-3xl font-black text-orange-700",children:d.filter(s=>s.priority==="urgente").length})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl shadow-lg",children:e.jsx(ue,{className:"h-8 w-8 text-white"})})]}),e.jsxs("div",{className:"mt-4 text-[11px] text-orange-700 font-medium bg-orange-100/60 rounded px-2 py-1","aria-label":"Tempo mÃ©dio de filtragem",children:["Filtro mÃ©dio: ",ke.toFixed(2),"ms"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ye,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar notificaÃ§Ãµes...",value:a.busca,onChange:s=>C({...a,busca:s.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Buscar notificaÃ§Ãµes"})]}),e.jsxs("select",{value:a.tipo,onChange:s=>C({...a,tipo:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),e.jsx("option",{value:"recado",children:"Recados"}),e.jsx("option",{value:"prova_tarefa",children:"Provas/Tarefas"}),e.jsx("option",{value:"material",children:"Materiais"}),e.jsx("option",{value:"sistema",children:"Sistema"})]}),e.jsxs("select",{value:a.status,onChange:s=>C({...a,status:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"nao_lida",children:"NÃ£o lidas"}),e.jsx("option",{value:"lida",children:"Lidas"})]}),e.jsxs("select",{value:a.prioridade,onChange:s=>C({...a,prioridade:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as prioridades"}),e.jsx("option",{value:"urgente",children:"Urgente"}),e.jsx("option",{value:"alta",children:"Alta"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"baixa",children:"Baixa"})]}),e.jsxs("select",{value:a.periodo,onChange:s=>C({...a,periodo:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"todos",children:"Todos os perÃ­odos"}),e.jsx("option",{value:"hoje",children:"Hoje"}),e.jsx("option",{value:"semana",children:"Esta semana"}),e.jsx("option",{value:"mes",children:"Este mÃªs"})]})]})]}),H.notifications_metrics_enabled!==!1&&z&&!T&&e.jsx(ss,{onForceSync:async()=>{g(!0),await U(),g(!1)}}),!T&&v&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f.length===p.length&&p.length>0,onChange:s=>s.target.checked?$e():Fe(),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:f.length>0?`${f.length} selecionada(s)`:"Selecionar todas"})]})}),f.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:Be,className:"flex items-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Marcar como Lidas"})]}),e.jsxs("button",{onClick:Oe,className:"flex items-center space-x-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Excluir"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[x," nÃ£o lidas de ",P," total"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:D,disabled:x===0,className:"flex items-center space-x-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Marcar Todas como Lidas"})]}),e.jsxs("button",{onClick:Ee,disabled:P-x===0,className:"flex items-center space-x-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("span",{children:"Excluir Lidas"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-2",ref:W,children:p.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma notificaÃ§Ã£o encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Ajuste os filtros ou aguarde novas notificaÃ§Ãµes chegarem."})]}):e.jsxs(e.Fragment,{children:[n?e.jsx(u,{height:Me,itemCount:M.length,itemSize:Re,width:"100%",className:"focus:outline-none",children:Y}):e.jsx("div",{className:"divide-y divide-gray-100",children:M.map((s,o)=>e.jsx("div",{children:Y({index:o,style:{}})},M[o].id))}),$<p.length&&e.jsx("div",{className:"flex justify-center pt-4 pb-2",children:e.jsxs("button",{onClick:()=>Z(s=>Math.min(s+100,p.length)),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow",children:["Mostrar mais (",p.length-$," restantes)"]})})]})}),e.jsx(Xe,{isOpen:ye,onClose:()=>{G(!1),K(null)},item:i==null?void 0:i.data,type:i==null?void 0:i.type,turmaName:(i==null?void 0:i.type)==="prova_tarefa"?(te=(se=(ee=i.data)==null?void 0:ee.disciplina)==null?void 0:se.turma)==null?void 0:te.nome:void 0,disciplinaName:(i==null?void 0:i.type)==="prova_tarefa"||(i==null?void 0:i.type)==="material"?(re=(ae=i.data)==null?void 0:ae.disciplina)==null?void 0:re.nome:void 0,autorName:(i==null?void 0:i.type)==="recado"?(oe=(le=i.data)==null?void 0:le.autor)==null?void 0:oe.nome:void 0})]})}export{xs as NotificacoesPage};
