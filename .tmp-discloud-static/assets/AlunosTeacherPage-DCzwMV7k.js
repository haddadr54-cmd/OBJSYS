import{u as Z,d as H,r as o,a5 as X,ar as J,j as e,G as C,X as z,v as W,a as q,B as O,C as F,E as K,b as Q,P as Y,i as ee,S as se,q as te,Z as ae,M as le}from"./index-CCr23udO.js";import{L as re}from"./LancarNotasModal-Cr1cCl9s.js";import{E as ne}from"./EnviarRecadoModal-aCrels50.js";import{getNotaTextColor as V}from"./gradeConfig-C64ZX5y1.js";import{F as oe}from"./filter-ClytLayh.js";import"./save-BDGo1Gz5.js";function de({isOpen:m,onClose:j,aluno:N}){var P,D,E,M,R,_;const{user:u,isSupabaseConnected:w}=Z(),S=H(u,w),[p,B]=o.useState([]),[c,$]=o.useState([]),[n,T]=o.useState({busca:"",turma:""}),[l,g]=o.useState(null),[U,y]=o.useState(!1);o.useEffect(()=>{m&&u&&I()},[m,u]),o.useEffect(()=>{if(N)if(c.length>0){const s=c.find(d=>d.id===N.id);g(s||null)}else g(s=>s&&s.id===N.id?s:{...N,turma:void 0,responsavel:void 0,notas:[],mediaGeral:0,totalPresencas:0,percentualPresenca:0});else g(null)},[N,c]);const I=async()=>{y(!0);try{const s=await S.getTurmas();if(B(s),s.length>0){const d=s.map(r=>r.id),b=await S.getAlunos(),t=w?await X():[],a=u.tipo_usuario==="professor"?b.filter(r=>d.includes(r.turma_id)):b,i=[];for(const r of a){const v=s.find(x=>x.id===r.turma_id),L=t.find(x=>x.id===r.responsavel_id);let h=[];try{w?h=await J(r.id):h=(await S.getNotas()).filter(A=>A.aluno_id===r.id)}catch(x){console.error("Erro ao carregar notas do aluno:",x),h=[]}const G=h.length>0?h.reduce((x,A)=>x+(A.nota||0),0)/h.length:0;i.push({...r,turma:v,responsavel:L,notas:h,mediaGeral:G,totalPresencas:0,percentualPresenca:0})}$(i)}}catch(s){console.error("Erro ao carregar dados:",s)}finally{y(!1)}},k=c.filter(s=>{const d=!n.busca||s.nome.toLowerCase().includes(n.busca.toLowerCase()),b=!n.turma||s.turma_id===n.turma;return d&&b});return m?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-full",children:e.jsx(C,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Meus Alunos"})]}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(z,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome do aluno...",value:n.busca,onChange:s=>T({...n,busca:s.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:n.turma,onChange:s=>T({...n,turma:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as turmas"}),p.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Alunos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:c.length})]}),e.jsx(C,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Turmas"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:p.length})]}),e.jsx(q,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Média Geral"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.length>0?(c.reduce((s,d)=>s+d.mediaGeral,0)/c.length).toFixed(1):"0.0"})]}),e.jsx(O,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Com Notas"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:c.filter(s=>s.notas&&s.notas.length>0).length})]}),e.jsx(F,{className:"h-8 w-8 text-yellow-600"})]})})]}),U?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma turma atribuída"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não possui turmas atribuídas. Entre em contato com o administrador."})]}):k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{className:"h-8 w-8 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum aluno encontrado com os filtros aplicados"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(s=>{var d,b,t;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:s.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.nome}),e.jsx("p",{className:"text-sm text-gray-500",children:(d=s.turma)==null?void 0:d.nome})]})]}),e.jsx("button",{onClick:()=>g(s),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-50",children:e.jsx(K,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Média Geral:"}),e.jsx("span",{className:`text-sm font-bold ${V(s.mediaGeral)}`,children:s.mediaGeral.toFixed(1)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Notas:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((b=s.notas)==null?void 0:b.length)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Responsável:"}),e.jsx("span",{className:"text-sm text-gray-900",children:((t=s.responsavel)==null?void 0:t.nome)||"Não informado"})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>g(s),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Ver Perfil Completo"})})]},s.id)})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:l.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.nome}),e.jsx("p",{className:"text-sm text-gray-500",children:(P=l.turma)==null?void 0:P.nome})]})]}),e.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(z,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Básicas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Nome Completo"}),e.jsx("p",{className:"text-gray-900",children:l.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Turma"}),e.jsx("p",{className:"text-gray-900",children:(D=l.turma)==null?void 0:D.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Matrícula"}),e.jsx("p",{className:"text-gray-900",children:l.id.slice(0,8)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Data de Criação"}),e.jsx("p",{className:"text-gray-900",children:new Date(l.criado_em).toLocaleDateString("pt-BR")})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Responsável"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Nome"}),e.jsx("p",{className:"text-gray-900",children:((E=l.responsavel)==null?void 0:E.nome)||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:((M=l.responsavel)==null?void 0:M.email)||"Não informado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Telefone"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:((R=l.responsavel)==null?void 0:R.telefone)||"Não informado"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Desempenho Acadêmico"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Média Geral"}),e.jsx("p",{className:`text-2xl font-bold ${V(l.mediaGeral)}`,children:l.mediaGeral.toFixed(1)})]}),e.jsx(O,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Notas"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:((_=l.notas)==null?void 0:_.length)||0})]}),e.jsx(F,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Presença"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[l.percentualPresenca,"%"]})]}),e.jsx(q,{className:"h-8 w-8 text-purple-600"})]})})]}),l.notas&&l.notas.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Histórico de Notas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Disciplina"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nota"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Trimestre"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Comentário"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.notas.map(s=>{var d;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-gray-900",children:(d=s.disciplina)==null?void 0:d.nome}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:`font-medium ${V(s.nota||0)}`,children:(s.nota||0).toFixed(1)})}),e.jsxs("td",{className:"px-3 py-2 text-gray-600",children:[s.trimestre,"º"]}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:s.comentario||"-"})]},s.id)})})]})})]})]})]})]})})]})}):null}function pe({onPageChange:m}){const{user:j,isSupabaseConnected:N}=Z(),u=H(j,N),[w,S]=o.useState([]),[p,B]=o.useState([]),[c,$]=o.useState([]),[n,T]=o.useState({busca:"",turma:""}),[l,g]=o.useState(!0),[U,y]=o.useState(!1),[I,k]=o.useState(!1),[P,D]=o.useState(!1),[E,M]=o.useState(null);o.useEffect(()=>{j&&R()},[j,N]);const R=async()=>{try{const[t,a,i]=await Promise.all([u.getTurmas(),u.getAlunos(),u.getPermissions().canViewAllUsers?u.getUsuarios():[]]),r=i.filter(v=>v.tipo_usuario==="pai");B(t),S(a),$(r)}catch(t){console.error("Erro ao carregar dados:",t)}finally{g(!1)}},_=(t,a)=>{if(!t)return"";const i=String(t).replace(/\D/g,""),r=i.startsWith("55")?i:`55${i}`,v=a?`?text=${encodeURIComponent(a)}`:"";return`https://wa.me/${r}${v}`},s=t=>{const a=p.find(r=>r.id===t.turma_id),i=c.find(r=>String(r.id)===String(t.responsavel_id));return{...t,turma:a,responsavel:i}},d=w.filter(t=>{const a=!n.busca||t.nome.toLowerCase().includes(n.busca.toLowerCase()),i=!n.turma||t.turma_id===n.turma;return a&&i}),b=t=>{M(t),D(!0)};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto mb-6"}),e.jsx("p",{className:"text-2xl font-bold text-gray-700",children:"Carregando seus alunos..."}),e.jsx("p",{className:"text-lg text-gray-500 mt-2",children:"Aguarde um momento"})]})}):e.jsxs("div",{className:"space-y-6 sm:space-y-8 lg:space-y-12",children:[e.jsx("div",{className:"bg-gradient-to-br from-white via-green-50 to-emerald-50 rounded-2xl sm:rounded-3xl shadow-xl border-2 border-green-200 p-6 sm:p-8 lg:p-12 animate-slide-in-up hover:shadow-2xl transition-all duration-500",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-6 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-green-500 via-emerald-500 to-teal-600 rounded-2xl sm:rounded-3xl shadow-2xl mx-auto sm:mx-0 animate-float",children:e.jsx(C,{className:"h-10 w-10 sm:h-12 sm:w-12 lg:h-16 lg:w-16 text-white"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-black bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 bg-clip-text text-transparent animate-glow",children:"🎓 Meus Alunos"}),e.jsx("p",{className:"text-gray-700 mt-2 sm:mt-4 text-lg sm:text-xl lg:text-2xl font-bold",children:"🌟 Acompanhe o desenvolvimento de cada estudante"})]})]}),e.jsx("div",{className:"flex items-center justify-center sm:justify-end",children:e.jsxs("div",{className:"flex items-center space-x-3 px-6 py-4 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl text-lg font-black shadow-xl animate-bounce-soft",children:[e.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"hidden sm:inline",children:"✅ Sistema Ativo"}),e.jsx("span",{className:"sm:hidden",children:"✅ Ativo"})]})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 rounded-2xl sm:rounded-3xl shadow-xl border-2 border-gray-200 p-6 sm:p-8 animate-slide-in-up delay-100",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl shadow-lg",children:e.jsx(oe,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-black text-gray-900",children:"🔍 Filtros Inteligentes"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"🔎 Buscar por nome do aluno...",value:n.busca,onChange:t=>T({...n,busca:t.target.value}),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-2xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold shadow-lg hover:shadow-xl transition-all"})]}),e.jsxs("select",{value:n.turma,onChange:t=>T({...n,turma:t.target.value}),className:"w-full px-4 py-4 border-2 border-gray-300 rounded-2xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[e.jsx("option",{value:"",children:"🏫 Todas as turmas"}),p.map(t=>e.jsx("option",{value:t.id,children:t.nome},t.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-2xl sm:rounded-3xl shadow-xl border-2 border-blue-200 p-4 sm:p-6 lg:p-8 hover:shadow-2xl hover:scale-110 hover:rotate-1 transition-all duration-500 animate-slide-in-up delay-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm lg:text-base font-black text-blue-600 uppercase tracking-wider",children:"🎓 Alunos"}),e.jsx("p",{className:"text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-black text-blue-700 animate-glow",children:w.length}),e.jsx("p",{className:"text-xs sm:text-sm text-blue-500 font-bold",children:"Total"})]}),e.jsx("div",{className:"p-3 sm:p-4 lg:p-6 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl sm:rounded-3xl shadow-2xl animate-float",children:e.jsx(C,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 xl:h-12 xl:w-12 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-green-50 rounded-2xl sm:rounded-3xl shadow-xl border-2 border-green-200 p-4 sm:p-6 lg:p-8 hover:shadow-2xl hover:scale-110 hover:rotate-1 transition-all duration-500 animate-slide-in-up delay-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm lg:text-base font-black text-green-600 uppercase tracking-wider",children:"🏫 Turmas"}),e.jsx("p",{className:"text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-black text-green-700 animate-glow",children:p.length}),e.jsx("p",{className:"text-xs sm:text-sm text-green-500 font-bold",children:"Atribuídas"})]}),e.jsx("div",{className:"p-3 sm:p-4 lg:p-6 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl sm:rounded-3xl shadow-2xl animate-float",children:e.jsx(q,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 xl:h-12 xl:w-12 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-purple-50 rounded-2xl sm:rounded-3xl shadow-xl border-2 border-purple-200 p-4 sm:p-6 lg:p-8 hover:shadow-2xl hover:scale-110 hover:rotate-1 transition-all duration-500 animate-slide-in-up delay-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm lg:text-base font-black text-purple-600 uppercase tracking-wider",children:"📊 Média"}),e.jsx("p",{className:"text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-black text-purple-700 animate-glow",children:p.length>0?Math.round(w.length/p.length):0}),e.jsx("p",{className:"text-xs sm:text-sm text-purple-500 font-bold",children:"Por turma"})]}),e.jsx("div",{className:"p-3 sm:p-4 lg:p-6 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl sm:rounded-3xl shadow-2xl animate-float",children:e.jsx(ee,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 xl:h-12 xl:w-12 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-amber-50 rounded-2xl sm:rounded-3xl shadow-xl border-2 border-amber-200 p-4 sm:p-6 lg:p-8 hover:shadow-2xl hover:scale-110 hover:rotate-1 transition-all duration-500 animate-slide-in-up delay-400",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm lg:text-base font-black text-amber-600 uppercase tracking-wider",children:"⭐ Status"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-black text-amber-700 animate-glow",children:"Excelente"}),e.jsx("p",{className:"text-xs sm:text-sm text-amber-500 font-bold",children:"Desempenho"})]}),e.jsx("div",{className:"p-3 sm:p-4 lg:p-6 bg-gradient-to-br from-amber-400 to-amber-600 rounded-2xl sm:rounded-3xl shadow-2xl animate-float",children:e.jsx(se,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 xl:h-12 xl:w-12 text-white"})})]})})]}),d.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow p-8 text-center border border-gray-200",children:[e.jsx(C,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhum aluno encontrado"}),e.jsx("p",{className:"text-gray-500",children:"Ajuste os filtros ou verifique se há alunos nas suas turmas."})]}):e.jsx("ul",{className:"divide-y divide-gray-100 bg-white rounded-2xl shadow-lg border border-gray-200",children:d.map(t=>{var i,r,v,L,h,G,x,A;const a=s(t);return e.jsxs("li",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6 px-8 py-7 hover:bg-gray-50 transition cursor-pointer text-base",children:[e.jsxs("div",{className:"flex items-center gap-6 min-w-0 w-full",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-emerald-500 to-green-600 text-white flex items-center justify-center font-black text-2xl",children:t.nome.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[e.jsx("button",{type:"button",className:"font-bold text-gray-900 truncate max-w-xs underline hover:text-emerald-700 focus:outline-none",onClick:f=>{f.stopPropagation(),b(t)},children:t.nome}),((i=a.turma)==null?void 0:i.nome)&&e.jsx("span",{className:"px-2 py-0.5 rounded bg-emerald-50 text-emerald-700 text-xs font-semibold border border-emerald-100",children:(r=a.turma)==null?void 0:r.nome}),e.jsx("span",{className:"px-2 py-0.5 rounded bg-green-50 text-green-700 text-xs font-semibold border border-green-100",children:"Ativo"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Responsável: ",e.jsx("span",{className:"font-semibold text-gray-800",children:((v=a.responsavel)==null?void 0:v.nome)||"Não informado"})]}),((L=a.responsavel)==null?void 0:L.email)&&e.jsxs("span",{children:["Email: ",e.jsx("span",{className:"font-semibold text-blue-700",children:a.responsavel.email})]}),((h=a.responsavel)==null?void 0:h.telefone)&&e.jsxs("span",{children:["Tel: ",e.jsx("span",{className:"font-semibold text-purple-700",children:a.responsavel.telefone})]})]})]})]}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-2 sm:mt-0",children:[e.jsx("button",{onClick:f=>{f.stopPropagation(),y(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded font-bold text-xs hover:bg-blue-700",children:"Notas"}),e.jsx("button",{onClick:f=>{f.stopPropagation(),m&&m("presenca")},className:"px-3 py-1 bg-green-600 text-white rounded font-bold text-xs hover:bg-green-700",children:"Presença"}),e.jsx("button",{onClick:f=>{f.stopPropagation(),k(!0)},className:"px-3 py-1 bg-purple-600 text-white rounded font-bold text-xs hover:bg-purple-700",children:"Recado"}),(((G=a.responsavel)==null?void 0:G.telefone)||t.telefone_responsavel)&&e.jsxs("a",{href:_(((x=a.responsavel)==null?void 0:x.telefone)||t.telefone_responsavel,`Olá ${((A=a.responsavel)==null?void 0:A.nome)||""}! Sou o(a) Prof. ${j==null?void 0:j.nome}. Sobre o aluno ${t.nome}.`),target:"_blank",rel:"noopener noreferrer",onClick:f=>f.stopPropagation(),className:"px-3 py-1 bg-emerald-600 text-white rounded font-bold text-xs hover:bg-emerald-700 flex items-center gap-1",children:[e.jsx(te,{className:"h-4 w-4"})," WhatsApp"]})]})]},t.id)})}),e.jsxs("div",{className:"bg-gradient-to-br from-white via-yellow-50 to-orange-50 rounded-3xl shadow-2xl border-2 border-yellow-200 p-8 sm:p-12 animate-slide-in-up delay-300",children:[e.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[e.jsx("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl sm:rounded-3xl shadow-2xl animate-bounce-soft",children:e.jsx(ae,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-black bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"⚡ Ações Rápidas"}),e.jsx("p",{className:"text-gray-700 font-bold text-lg sm:text-xl",children:"Acesso direto às funções mais usadas"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("button",{onClick:()=>y(!0),className:"p-6 sm:p-8 bg-white border-2 border-blue-200 rounded-2xl sm:rounded-3xl hover:border-blue-400 hover:shadow-2xl transition-all duration-300 hover:scale-110 text-center group",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl mx-auto mb-4 w-fit group-hover:scale-125 transition-transform shadow-xl",children:e.jsx(O,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsx("span",{className:"text-sm sm:text-base font-black text-blue-900",children:"📝 Lançar Notas"})]}),e.jsxs("button",{onClick:()=>{m?(console.log("🔍 [AlunosTeacherPage] Ações Rápidas - Navegando para presenca"),m("presenca")):console.error("❌ onPageChange não está disponível nas Ações Rápidas")},className:"p-6 sm:p-8 bg-white border-2 border-green-200 rounded-2xl sm:rounded-3xl hover:border-green-400 hover:shadow-2xl transition-all duration-300 hover:scale-110 text-center group",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl mx-auto mb-4 w-fit group-hover:scale-125 transition-transform shadow-xl",children:e.jsx(F,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsx("span",{className:"text-sm sm:text-base font-black text-green-900",children:"✅ Presença"})]}),e.jsxs("button",{onClick:()=>{m?(console.log("🔍 [AlunosTeacherPage] Ações Rápidas - Navegando para agenda"),m("agenda")):console.error("❌ onPageChange não está disponível nas Ações Rápidas")},className:"p-6 sm:p-8 bg-white border-2 border-purple-200 rounded-2xl sm:rounded-3xl hover:border-purple-400 hover:shadow-2xl transition-all duration-300 hover:scale-110 text-center group",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl mx-auto mb-4 w-fit group-hover:scale-125 transition-transform shadow-xl",children:e.jsx(F,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsx("span",{className:"text-sm sm:text-base font-black text-purple-900",children:"📅 Agenda"})]}),e.jsxs("button",{onClick:()=>k(!0),className:"p-6 sm:p-8 bg-white border-2 border-pink-200 rounded-2xl sm:rounded-3xl hover:border-pink-400 hover:shadow-2xl transition-all duration-300 hover:scale-110 text-center group",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-pink-400 to-pink-600 rounded-2xl mx-auto mb-4 w-fit group-hover:scale-125 transition-transform shadow-xl",children:e.jsx(le,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsx("span",{className:"text-sm sm:text-base font-black text-pink-900",children:"💌 Recados"})]})]})]}),e.jsx(re,{isOpen:U,onClose:()=>y(!1),onSave:()=>y(!1)}),e.jsx(ne,{isOpen:I,onClose:()=>k(!1),onSave:()=>k(!1)}),e.jsx(de,{isOpen:P,aluno:E||void 0,onClose:()=>{D(!1),M(null)}})]})}export{pe as AlunosTeacherPage};
