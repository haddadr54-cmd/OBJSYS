import{r as n,j as e,X as de,U as Y,B as K,C as Q,M as z,G as oe,a as me,P as ce,b as xe,T as se,c as he,F as te,S as ae,u as ge,d as pe,e as Z,p as be,f as ue}from"./index-BJRSlDEO.js";import{H as ee,N as fe,A as je,M as Ne,R as ve,a as ye,P as we,b as De,I as Se}from"./NotificacoesPage-CIhIZHN6.js";function ke({isOpen:y,onClose:x,aluno:t,allNotas:h,allProvasTarefas:A,allRecados:c,allDisciplinas:f}){var k,G,v,w,C;const[S,j]=n.useState("info"),[p,_]=n.useState([]),[M,$]=n.useState([]),[P,B]=n.useState([]),[q,O]=n.useState(!0);console.log("📋 [StudentProfileModal] Modal renderizado!",{aluno:t.nome,alunoId:t.id,turma:((k=t.turma)==null?void 0:k.nome)||"Turma não definida",responsavel:((G=t.responsavel)==null?void 0:G.nome)||"Responsável não definido",totalNotas:h.length,totalProvas:A.length,totalRecados:c.length,timestamp:new Date().toISOString()});const T=n.useMemo(()=>h.filter(s=>s.aluno_id===(t==null?void 0:t.id)),[h,t==null?void 0:t.id]),I=n.useMemo(()=>A.filter(s=>T.some(l=>l.disciplina_id===s.disciplina_id)),[A,T]),V=n.useMemo(()=>c.filter(s=>s.destinatario_tipo==="aluno"&&s.destinatario_id===(t==null?void 0:t.id)||s.destinatario_tipo==="turma"&&s.destinatario_id===(t==null?void 0:t.turma_id)||s.destinatario_tipo==="geral"),[c,t==null?void 0:t.id,t==null?void 0:t.turma_id]);n.useEffect(()=>{y&&t&&(_(T),$(I),B(V),O(!1))},[y,t,T,I,V]);const E=()=>p.length===0?0:p.reduce((l,r)=>l+(r.nota||0),0)/p.length,H=s=>{const l=p.filter(m=>m.disciplina_id===s);return l.length===0?0:l.reduce((m,b)=>m+(b.nota||0),0)/l.length},J=s=>{const l=f.find(r=>r.id===s);return(l==null?void 0:l.nome)||"Disciplina não encontrada"},L=s=>{const l=f.find(r=>r.id===s);return(l==null?void 0:l.cor)||"#3B82F6"},N=()=>{const s=new Date().toISOString().split("T")[0];return M.filter(l=>l.data>=s).sort((l,r)=>{const m=l.data||l.data_entrega,b=r.data||r.data_entrega;return m.localeCompare(b)}).slice(0,5)},W=()=>P.sort((s,l)=>new Date(l.data_envio).getTime()-new Date(s.data_envio).getTime()).slice(0,5);return y?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1000] p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl border-4 border-blue-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 relative",children:[e.jsx("button",{onClick:()=>{console.log("🔒 [StudentProfileModal] Botão fechar clicado"),x()},className:"absolute top-4 right-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-all duration-300 z-[1001]",children:e.jsx(de,{className:"h-6 w-6"})}),e.jsx("div",{className:"pr-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center text-white font-black text-2xl",children:t.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black",children:t.nome}),e.jsxs("p",{className:"text-blue-100",children:["Turma: ",((v=t.turma)==null?void 0:v.nome)||"Não definida"]}),e.jsxs("p",{className:"text-blue-100",children:["Responsável: ",((w=t.responsavel)==null?void 0:w.nome)||"Não definido"]})]})]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"info",label:"Informações",icon:Y},{id:"notas",label:"Notas",icon:K},{id:"avaliacoes",label:"Avaliações",icon:Q},{id:"recados",label:"Recados",icon:z}].map(({id:s,label:l,icon:r})=>e.jsxs("button",{onClick:()=>j(s),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors ${S===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(r,{className:"h-4 w-4"}),e.jsx("span",{children:l})]},s))})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:q?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando dados..."})]}):e.jsxs(e.Fragment,{children:[S==="info"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(Y,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informações Pessoais"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nome Completo"}),e.jsx("p",{className:"text-gray-800 font-medium",children:t.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Data de Nascimento"}),e.jsx("p",{className:"text-gray-800",children:t.data_nascimento||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"CPF"}),e.jsx("p",{className:"text-gray-800",children:t.cpf||"Não informado"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(oe,{className:"h-5 w-5 mr-2 text-purple-600"}),"Informações Acadêmicas"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Turma"}),e.jsx("p",{className:"text-gray-800 font-medium",children:((C=t.turma)==null?void 0:C.nome)||"Não definida"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Matrícula"}),e.jsx("p",{className:"text-gray-800",children:t.matricula||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Média Geral"}),e.jsx("p",{className:"text-gray-800 font-bold text-lg",children:E().toFixed(1)})]})]})]})]}),t.responsavel&&e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(me,{className:"h-5 w-5 mr-2 text-green-600"}),"Responsável"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nome"}),e.jsx("p",{className:"text-gray-800 font-medium",children:t.responsavel.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Telefone"}),e.jsxs("p",{className:"text-gray-800 flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),t.responsavel.telefone||"Não informado"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsxs("p",{className:"text-gray-800 flex items-center",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),t.responsavel.email||"Não informado"]})]})]})]})]}),S==="notas"&&e.jsx("div",{className:"space-y-6",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma nota encontrada"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(se,{className:"h-5 w-5 mr-2 text-blue-600"}),"Resumo Acadêmico"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-black text-blue-600",children:E().toFixed(1)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Média Geral"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-black text-purple-600",children:p.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Notas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-black text-green-600",children:p.filter(s=>(s.nota||0)>=7).length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Notas ≥ 7.0"})]})]})]}),e.jsx("div",{className:"space-y-4",children:Array.from(new Set(p.map(s=>s.disciplina_id))).map(s=>{const l=p.filter(o=>o.disciplina_id===s),r=H(s),m=J(s),b=L(s);return e.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:b}}),m]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-black",style:{color:b},children:r.toFixed(1)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Média"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(o=>{var R;return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:o.tipo||"Avaliação"}),e.jsx("span",{className:`text-lg font-bold ${(o.nota||0)>=7?"text-green-600":(o.nota||0)>=5?"text-yellow-600":"text-red-600"}`,children:((R=o.nota)==null?void 0:R.toFixed(1))||"0.0"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:o.data_lancamento?new Date(o.data_lancamento).toLocaleDateString("pt-BR"):"N/A"}),o.observacoes&&e.jsx("p",{className:"text-xs text-gray-600 mt-2 italic",children:o.observacoes})]},o.id)})})]},s)})})]})}),S==="avaliacoes"&&e.jsx("div",{className:"space-y-6",children:M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma avaliação encontrada"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(he,{className:"h-5 w-5 mr-2 text-orange-600"}),"Próximas Avaliações"]}),e.jsx("div",{className:"space-y-3",children:N().map(s=>{var m;const l=s.data,r=(m=s.disciplina)==null?void 0:m.nome;return e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-600",children:r})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-orange-600",children:new Date(l).toLocaleDateString("pt-BR")}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:s.tipo})]})]},s.id)})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2 text-blue-600"}),"Todas as Avaliações"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(s=>{var b,o;const l=s.data,r=(b=s.disciplina)==null?void 0:b.nome,m=(o=s.disciplina)==null?void 0:o.cor;return e.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:s.titulo}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:m||"#3B82F6"}}),r]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.tipo==="prova"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:s.tipo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{className:"font-medium",children:new Date(l).toLocaleDateString("pt-BR")})]}),s.valor&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Valor:"}),e.jsxs("span",{className:"font-medium",children:[s.valor," pontos"]})]})]}),s.descricao&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("p",{className:"text-sm text-gray-600",children:s.descricao})})]},s.id)})})]})]})}),S==="recados"&&e.jsx("div",{className:"space-y-6",children:P.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum recado encontrado"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(ae,{className:"h-5 w-5 mr-2 text-green-600"}),"Recados Recentes"]}),e.jsx("div",{className:"space-y-3",children:W().map(s=>{var l;return e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:s.titulo}),e.jsxs("p",{className:"text-sm text-gray-600",children:["De: ",((l=s.remetente)==null?void 0:l.nome)||"Sistema"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.data_envio).toLocaleDateString("pt-BR")}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.destinatario_tipo==="geral"?"bg-blue-100 text-blue-800":s.destinatario_tipo==="turma"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:s.destinatario_tipo==="geral"?"Geral":s.destinatario_tipo==="turma"?"Turma":"Individual"})]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.conteudo})]},s.id)})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Todos os Recados"]}),e.jsx("div",{className:"space-y-4",children:P.map(s=>{var l;return e.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:s.titulo}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["De: ",((l=s.remetente)==null?void 0:l.nome)||"Sistema"]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.data_envio).toLocaleDateString("pt-BR")})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.destinatario_tipo==="geral"?"bg-blue-100 text-blue-800":s.destinatario_tipo==="turma"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:s.destinatario_tipo==="geral"?"Geral":s.destinatario_tipo==="turma"?"Turma":"Individual"})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.conteudo})}),s.anexos&&s.anexos.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Anexos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.anexos.map((r,m)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs text-gray-600",children:r.nome||"Anexo"},m))})]})]},s.id)})})]})]})})]})})]})}):null}function Te({onNavigate:y,currentPage:x="dashboard"}){const{user:t,isSupabaseConnected:h,signOut:A}=ge(),c=pe(t,h),[f,S]=n.useState([]),[j,p]=n.useState([]),[_,M]=n.useState([]),[$,P]=n.useState([]),[B,q]=n.useState([]),[O,T]=n.useState([]),[I,V]=n.useState([]),[E,H]=n.useState(!0),[J,L]=n.useState(!1),[N,W]=n.useState(null),[k,G]=n.useState("prova_tarefa"),[v,w]=n.useState(!1),[C,s]=n.useState(null),l=n.useCallback(async()=>{confirm("Tem certeza que deseja sair do sistema?")&&await A()},[A]),r=n.useCallback(a=>{console.log("🔍 [ParentDashboard] handleNavigate chamado:",{pageId:a,currentPage:x,userType:t==null?void 0:t.tipo_usuario,timestamp:new Date().toISOString()}),a==="sair"?l():(console.log("🔍 [ParentDashboard] Chamando onNavigate com:",a),y==null||y(a)),w(!1)},[y,l]);n.useEffect(()=>{t&&m();const a=i=>{r(i.detail)};return window.addEventListener("navigate",a),()=>{window.removeEventListener("navigate",a)}},[t,h,r]);const m=async()=>{try{const[a,i,d,g,u,D]=await Promise.all([c.getAlunos(),c.getTurmas(),c.getNotas(),c.getProvasTarefas(),c.getRecados(),c.getDisciplinas()]);S(a),T(i),p(d);const U=new Date().toISOString().split("T")[0],re=g.filter(F=>(h?F.data:F.data_entrega)>=U).sort((F,X)=>{const ie=h?F.data:F.data_entrega,ne=h?X.data:X.data_entrega;return ie.localeCompare(ne)});M(re),P(g),q(u),V(D)}catch(a){console.error("Erro ao carregar dashboard:",a)}finally{H(!1)}},b=async(a,i)=>{try{await ue(i,a.id)}catch(d){console.error("Erro ao registrar visualização:",d)}W(a),G(i),L(!0)},[o,R]=n.useState(!1),le=a=>{var i;console.log("🎓 [ParentDashboard] Card do aluno clicado!",{aluno:a.nome,alunoId:a.id,turma:(i=a.turma)==null?void 0:i.nome,timestamp:new Date().toISOString()}),s(a),R(!0)};return x!=="dashboard"?e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[e.jsx(Z,{currentPage:x,onPageChange:r,isOpen:v,onToggle:()=>w(!v)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(ee,{onMenuToggle:()=>w(!v),title:be[x]||"Portal do Responsável"}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto mobile-container",children:[x==="notas"&&e.jsx(fe,{}),x==="agenda"&&e.jsx(je,{}),x==="materiais"&&e.jsx(Ne,{}),x==="recados"&&e.jsx(ve,{}),x==="notificacoes"&&e.jsx(ye,{}),x==="perfil"&&e.jsx(we,{})]})})]})]}):E?e.jsx("div",{className:"min-h-screen layout-modern flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner-large mx-auto mb-8 animate-glow"}),e.jsx("p",{className:"text-2xl font-black text-gray-700 animate-pulse",children:"Carregando informações..."}),e.jsx("p",{className:"text-lg text-gray-500 mt-4 font-semibold",children:"Aguarde um momento"})]})}):e.jsxs("div",{className:"flex h-screen layout-modern overflow-hidden",children:[e.jsx(Z,{currentPage:x,onPageChange:r,isOpen:v,onToggle:()=>w(!v)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(ee,{onMenuToggle:()=>w(!v),title:"Portal do Responsável"}),e.jsx("main",{className:"content-modern",children:e.jsxs("div",{className:"mobile-container space-y-6 sm:space-y-8 lg:space-y-12",children:[e.jsx("div",{className:"glass-card rounded-2xl sm:rounded-3xl mobile-card animate-slide-in-up hover-lift",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"mobile-heading heading-modern animate-glow",children:["Olá, ",t==null?void 0:t.nome.split(" ")[0],"! 👋"]}),e.jsx("p",{className:"text-gray-600 mt-2 sm:mt-4 text-base sm:text-xl font-semibold subheading-modern",children:"Acompanhe o desenvolvimento acadêmico dos seus filhos"})]}),e.jsx("div",{className:"flex items-center justify-center sm:justify-end",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl sm:rounded-3xl text-sm sm:text-base font-black shadow-modern animate-bounce-soft status-online",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-white rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"hidden sm:inline",children:"Online"}),e.jsx("span",{className:"sm:hidden",children:"✓"})]})})]})}),f.length>0&&e.jsxs("div",{className:"glass-card rounded-2xl sm:rounded-3xl mobile-card animate-slide-in-up delay-100",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-black text-gradient-objetivo mb-6 sm:mb-8 lg:mb-12 flex items-center",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl sm:rounded-2xl shadow-modern mr-3 sm:mr-6 animate-bounce-soft",children:e.jsx(ae,{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 text-white"})}),"⭐ Resumo dos Seus Filhos"]}),e.jsx("div",{className:"mobile-grid",children:f.map(a=>{var i,d;return e.jsxs("div",{className:"card-modern mobile-card bg-gradient-to-br from-blue-50 via-indigo-100 to-purple-100 border-2 border-blue-300 hover:border-blue-500 animate-scale-in cursor-pointer select-none",onClick:()=>le(a),style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-2xl sm:rounded-3xl flex items-center justify-center text-white font-black text-xl sm:text-2xl lg:text-3xl shadow-modern-colored animate-float mx-auto sm:mx-0",children:a.nome.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-black text-gray-900",children:a.nome}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-700 font-bold",children:["🏫 ",(i=a.turma)==null?void 0:i.nome]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 font-semibold",children:["📅 ",(d=a.turma)==null?void 0:d.ano_letivo]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 sm:pt-6 border-t-2 border-blue-300",children:[e.jsx("span",{className:"text-sm sm:text-base font-black text-gray-800 whitespace-nowrap",children:"📊 Média Geral:"}),e.jsx("div",{className:`px-4 sm:px-6 py-3 sm:py-4 rounded-2xl sm:rounded-3xl font-black text-lg sm:text-xl lg:text-2xl shadow-modern animate-glow ${c.calcularMediaAluno(a.id,j)>=7?"bg-gradient-to-r from-green-400 to-green-600 text-white":c.calcularMediaAluno(a.id,j)>=5?"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white":"bg-gradient-to-r from-red-400 to-red-600 text-white"}`,children:c.calcularMediaAluno(a.id,j).toFixed(1)})]})]},a.id)})})]}),e.jsxs("div",{className:"mobile-grid",children:[e.jsxs("button",{onClick:()=>r("notas"),className:"card-modern group mobile-card bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-2 border-blue-200 hover:border-blue-400 text-left animate-scale-in delay-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-3 sm:p-4 lg:p-5 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl sm:rounded-3xl text-white group-hover:scale-125 group-hover:rotate-12 transition-all duration-500 shadow-modern-colored mx-auto sm:mx-0",children:e.jsx(K,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black text-blue-900",children:"Notas"}),e.jsx("p",{className:"text-sm sm:text-base text-blue-700 font-bold",children:"Boletim escolar"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl sm:text-3xl font-black text-blue-600 animate-glow",children:j.length}),e.jsxs("span",{className:"text-xs sm:text-sm text-blue-600 opacity-0 group-hover:opacity-100 transition-all duration-300 font-black bg-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Ver boletim →"}),e.jsx("span",{className:"sm:hidden",children:"Ver →"})]})]})]}),e.jsxs("button",{onClick:()=>r("agenda"),className:"card-modern group mobile-card bg-gradient-to-br from-amber-50 to-amber-100 hover:from-amber-100 hover:to-amber-200 border-2 border-amber-200 hover:border-amber-400 text-left animate-scale-in delay-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-3 sm:p-4 lg:p-5 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl sm:rounded-3xl text-white group-hover:scale-125 group-hover:rotate-12 transition-all duration-500 shadow-modern-colored mx-auto sm:mx-0",children:e.jsx(Q,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black text-amber-900",children:"Agenda"}),e.jsx("p",{className:"text-sm sm:text-base text-amber-700 font-bold",children:"Provas e tarefas"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl sm:text-3xl font-black text-amber-600 animate-glow",children:_.length}),e.jsxs("span",{className:"text-xs sm:text-sm text-amber-600 opacity-0 group-hover:opacity-100 transition-all duration-300 font-black bg-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Ver agenda →"}),e.jsx("span",{className:"sm:hidden",children:"Ver →"})]})]})]}),e.jsxs("button",{onClick:()=>r("materiais"),className:"card-modern group mobile-card bg-gradient-to-br from-emerald-50 to-emerald-100 hover:from-emerald-100 hover:to-emerald-200 border-2 border-emerald-200 hover:border-emerald-400 text-left animate-scale-in delay-300",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-3 sm:p-4 lg:p-5 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl sm:rounded-3xl text-white group-hover:scale-125 group-hover:rotate-12 transition-all duration-500 shadow-modern-colored mx-auto sm:mx-0",children:e.jsx(te,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black text-emerald-900",children:"Materiais"}),e.jsx("p",{className:"text-sm sm:text-base text-emerald-700 font-bold",children:"Recursos didáticos"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg sm:text-2xl font-black text-emerald-600 animate-glow",children:"Disponível"}),e.jsxs("span",{className:"text-xs sm:text-sm text-emerald-600 opacity-0 group-hover:opacity-100 transition-all duration-300 font-black bg-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Ver materiais →"}),e.jsx("span",{className:"sm:hidden",children:"Ver →"})]})]})]}),e.jsxs("button",{onClick:()=>r("recados"),className:"card-modern group mobile-card bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 border-2 border-purple-200 hover:border-purple-400 text-left animate-scale-in delay-400",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-3 sm:p-4 lg:p-5 bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl sm:rounded-3xl text-white group-hover:scale-125 group-hover:rotate-12 transition-all duration-500 shadow-modern-colored mx-auto sm:mx-0",children:e.jsx(z,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black text-purple-900",children:"Recados"}),e.jsx("p",{className:"text-sm sm:text-base text-purple-700 font-bold",children:"Comunicados"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl sm:text-3xl font-black text-purple-600 animate-glow",children:B.length}),e.jsxs("span",{className:"text-xs sm:text-sm text-purple-600 opacity-0 group-hover:opacity-100 transition-all duration-300 font-black bg-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Ver recados →"}),e.jsx("span",{className:"sm:hidden",children:"Ver →"})]})]})]})]}),_.length>0&&e.jsxs("div",{className:"glass-card rounded-2xl sm:rounded-3xl mobile-card bg-gradient-to-br from-amber-50 to-orange-100 border-2 border-amber-200 animate-slide-in-up delay-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-6 sm:mb-8",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl sm:rounded-2xl shadow-modern animate-bounce-soft mx-auto sm:mx-0",children:e.jsx(De,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-black text-amber-900",children:"⚠️ Próximas Avaliações"}),e.jsx("p",{className:"text-amber-700 font-bold text-sm sm:text-base lg:text-lg",children:"Fique atento às datas importantes"})]})]}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:_.slice(0,3).map(a=>{var U;const i=h?a.data:a.data_entrega,d=new Date().toISOString().split("T")[0],g=i===d,u=new Date(i).getTime()-new Date(d).getTime(),D=Math.ceil(u/(1e3*60*60*24));return e.jsx("div",{className:"card-modern p-4 sm:p-6 bg-white border-2 border-amber-200 hover:border-amber-400 cursor-pointer interactive-modern",onClick:()=>b(a,"prova_tarefa"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-gray-900 text-base sm:text-lg",children:a.titulo}),e.jsx("p",{className:"text-gray-600 font-semibold text-sm sm:text-base",children:(U=a.disciplina)==null?void 0:U.nome})]}),e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsx("div",{className:`px-4 sm:px-6 py-2 sm:py-3 rounded-xl sm:rounded-2xl text-sm sm:text-base font-black shadow-lg animate-pulse ${g?"bg-red-500 text-white animate-pulse":D<=3?"bg-amber-500 text-white":"bg-green-500 text-white"}`,children:g?"🔔 HOJE":`${D} dias`}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-2 font-semibold",children:new Date(i).toLocaleDateString("pt-BR")})]})]})},a.id)})})]}),e.jsxs("div",{className:"glass-card rounded-2xl sm:rounded-3xl mobile-card animate-slide-in-up delay-300",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-black text-gray-900 mb-6 sm:mb-8 flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl sm:rounded-2xl shadow-modern mr-0 sm:mr-4 animate-bounce-soft mx-auto sm:mx-0",children:e.jsx(se,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsx("span",{className:"text-center sm:text-left",children:"Resumo Geral"})]}),e.jsxs("div",{className:"mobile-stats-grid",children:[e.jsxs("div",{className:"text-center p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl sm:rounded-2xl hover-lift",children:[e.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-black text-blue-600 mb-2 sm:mb-3 animate-glow",children:f.length}),e.jsx("div",{className:"text-xs sm:text-sm lg:text-base font-bold text-blue-800",children:"👨‍👩‍👧‍👦 Filhos"})]}),e.jsxs("div",{className:"text-center p-4 sm:p-6 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl sm:rounded-2xl hover-lift",children:[e.jsx("span",{className:"text-2xl sm:text-3xl lg:text-4xl font-black text-emerald-600 mb-2 sm:mb-3 animate-glow",children:j.length}),e.jsx("div",{className:"text-xs sm:text-sm lg:text-base font-bold text-emerald-800",children:"📝 Notas"})]}),e.jsxs("div",{className:"text-center p-4 sm:p-6 bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl sm:rounded-2xl hover-lift",children:[e.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-black text-amber-600 mb-2 sm:mb-3 animate-glow",children:_.length}),e.jsx("div",{className:"text-xs sm:text-sm lg:text-base font-bold text-amber-800",children:"📅 Próximas Provas"})]}),e.jsxs("div",{className:"text-center p-4 sm:p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl sm:rounded-2xl hover-lift",children:[e.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-black text-purple-600 mb-2 sm:mb-3 animate-glow",children:f.length>0?(f.reduce((a,i)=>a+c.calcularMediaAluno(i.id,j),0)/f.length).toFixed(1):"0.0"}),e.jsx("div",{className:"text-xs sm:text-sm lg:text-base font-bold text-purple-800",children:"📊 Média Geral"})]})]})]})]})})]}),e.jsx(Se,{isOpen:J,onClose:()=>L(!1),item:N,type:k,turmaName:k==="prova_tarefa"&&N?(()=>{var i,d;const a=N;if(h)return(i=O.find(g=>{var u;return g.id===((u=a.disciplina)==null?void 0:u.turma_id)}))==null?void 0:i.nome;{const{localDB:g}=require("../../lib/localDatabase");return(d=g.getTurmas().find(u=>u.id===a.turma_id))==null?void 0:d.nome}})():void 0,disciplinaName:k==="prova_tarefa"&&N?(()=>{var i,d;const a=N;if(h)return(i=a.disciplina)==null?void 0:i.nome;{const{localDB:g}=require("../../lib/localDatabase");return(d=g.getDisciplinas().find(D=>D.id===a.disciplina_id))==null?void 0:d.nome}})():void 0,autorName:k==="recado"&&N?(()=>{var i,d;const a=N;if(h)return(i=a.autor)==null?void 0:i.nome;{const{localDB:g}=require("../../lib/localDatabase");return(d=g.getUsuarios().find(D=>D.id===a.autor_id))==null?void 0:d.nome}})():void 0}),C&&o&&e.jsx(ke,{isOpen:o,onClose:()=>{console.log("🔒 [ParentDashboard] Fechando modal do perfil do aluno"),R(!1),s(null)},aluno:C,allNotas:j,allProvasTarefas:$,allRecados:B,allTurmas:O,allDisciplinas:I})]})}export{Te as ParentDashboard};
